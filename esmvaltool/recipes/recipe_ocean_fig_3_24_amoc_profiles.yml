# ESMValTool
# recipe_ocean_fig_3_24_amoc.yml

documentation:
  description: |
    Recipe to produce AMOC.

  authors:
    - demo_le

  maintainer:
    - schl_ma

  references:
    - demora2018gmd

  projects:
    - ukesm

preprocessors:

  prep_transect:
    custom_order: true
    extract_named_regions:
      regions: atlantic_arctic_ocean
    # time_average:
    # extract_time:
    #   start_year: 2001
    #   start_month: 1
    #   start_day: 1
    #   end_year: 2003
    #   end_month: 12
    #   end_day: 31

diagnostics:

  # --------------------------------------------------
  # Transect diagnostics
  # --------------------------------------------------
  diag_transects:
    description: Stream function zonal mean
    variables:
      msftmyz:
        short_name: msftmyz
        preprocessor: prep_transect
        field: TO2M
        mip: Omon
        exp: historical
        start_year: 2000
        end_year: 2004

    additional_datasets:
       # In the original figure they use pre-industrial values here.
     - {dataset: CanESM2,          project: CMIP5,    ensemble: r1i1p1}
     - {dataset: CCSM4,            project: CMIP5,    ensemble: r1i1p1}
     - {dataset: CESM1-BGC,        project: CMIP5,    ensemble: r1i1p1}
     - {dataset: CESM1-CAM5-1-FV2, project: CMIP5,    ensemble: r1i1p1}
     - {dataset: CESM1-CAM5,       project: CMIP5,    ensemble: r1i1p1}
     - {dataset: CESM1-FASTCHEM,   project: CMIP5,    ensemble: r1i1p1}
     - {dataset: CESM1-WACCM,      project: CMIP5,    ensemble: r1i1p1}
     - {dataset: CNRM-CM5-2,       project: CMIP5,    ensemble: r1i1p1}
     - {dataset: CNRM-CM5,         project: CMIP5,    ensemble: r1i1p1}
     - {dataset: FGOALS-g2,        project: CMIP5,    ensemble: r1i1p1}
     - {dataset: MIROC5,           project: CMIP5,    ensemble: r1i1p1}
     - {dataset: MPI-ESM-LR,       project: CMIP5,    ensemble: r1i1p1}
     - {dataset: MPI-ESM-MR,       project: CMIP5,    ensemble: r1i1p1}
     - {dataset: MPI-ESM-P,        project: CMIP5,    ensemble: r1i1p1}
     - {dataset: MRI-CGCM3,        project: CMIP5,    ensemble: r1i1p1}
     - {dataset: MRI-ESM1,         project: CMIP5,    ensemble: r1i1p1}
     - {dataset: NorESM1-ME,       project: CMIP5,    ensemble: r1i1p1}
     - {dataset: NorESM1-M,        project: CMIP5,    ensemble: r1i1p1}
     # CMIP6:  
      # - {dataset: GISS-E2-1-G,      project: CMIP6,    ensemble: r1i1p1f1, grid: gn}

    scripts:
      Atlantic_Stream_function_zonal_mean:
        script: ocean/diagnostic_amoc_profiles.py
        thresholds: [-20, -10., 0., 10., 20.]
        set_y_logscale: False
