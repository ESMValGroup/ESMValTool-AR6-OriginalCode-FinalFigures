# ESMValTool
# recipe_ipccwg1ar6ch3.yml
---
documentation:

  description: |
    Producing selected figures from IPCC WGI AR6, chap. 3

  authors:
    - bock_lisa
    - eyring_veronika

#  maintainer:
    
  references:
    - flato13ipcc

  projects:
    - ipcc_ar6


preprocessors:

  clim_ref:
    regrid:
      target_grid: reference_dataset
      scheme: linear
    multi_model_statistics:
      span: full #overlap
      statistics: [mean]
      exclude: [reference_dataset]

datasets:
  - &cmip3 {dataset: bccr_bcm2_0, project: CMIP3,  mip: A1,  modeling_realm: atm,  exp: 20c3m,  frequency: mo, ensemble: run1}
  - {<<: *cmip3, dataset: cccma_cgcm3_1}
  - {<<: *cmip3, dataset: cccma_cgcm3_1_t63}
  - {<<: *cmip3, dataset: csiro_mk3_0, start_year: 1871}
  #- {<<: *cmip3, dataset: gfdl_cm2_0}
  #- {<<: *cmip3, dataset: gfdl_cm2_1}
  - {<<: *cmip3, dataset: giss_aom}
  - {<<: *cmip3, dataset: giss_model_e_h, start_year: 1880}
  - {<<: *cmip3, dataset: giss_model_e_r, start_year: 1880}
  - {<<: *cmip3, dataset: iap_fgoals1_0_g}
  - {<<: *cmip3, dataset: ingv_echam4, start_year: 1870}
  - {<<: *cmip3, dataset: inmcm3_0, start_year: 1871}
  - {<<: *cmip3, dataset: ipsl_cm4, start_year: 1860}
#  - {<<: *cmip3, dataset: miroc3_2_hires, start_year: 1900}
  - {<<: *cmip3, dataset: miroc3_2_medres}
  #- {<<: *cmip3, dataset: miub_echo_g}
  - {<<: *cmip3, dataset: mpi_echam5, start_year: 1860}
  #- {<<: *cmip3, dataset: mri_cgcm2_3_2a}
  - {<<: *cmip3, dataset: ncar_ccsm3_0, start_year: 1870}
  - {<<: *cmip3, dataset: ncar_pcm1, start_year: 1890}
  - {<<: *cmip3, dataset: ukmo_hadcm3, start_year: 1860}
  - {<<: *cmip3, dataset: ukmo_hadgem1, start_year: 1860}
  - {dataset: HadCRUT4, project: OBS, type: ground, version: 1, tier: 2 }



diagnostics:

  # **********************************************************************
  # IPCC WGI AR6, chap. 3
  # Sect. 3.3 
  # Fig 3.3 (ZOD fig. 3.10)
  # similar to fig. IPCC AR5, chap. 9, 9.8
  # Lisa
  # **********************************************************************
  # Time series of anomalies of annual and global surface temperature
  # **********************************************************************

  fig_3_3:
    description: IPCC AR6 Ch. 3, Fig. 3.x (near-surface temperature)
    variables:
      tas:
        preprocessor: clim_ref   
        reference_dataset: HadCRUT4   
        mip: Amon
        project: CMIP3
        exp: historical
        start_year: 1850
        end_year: 1999
    scripts:
      tsline_anom:
        script: ipcc_ar5/tsline.ncl
        time_avg: "yearly"
        ts_anomaly: "anom"   
        ref_start: 1850
        ref_end: 1900
        ref_mask: True
        plot_units: "degC"
        y_min: -0.5
        y_max: 1.6
        volcanoes: True
        styleset: CMIP3
