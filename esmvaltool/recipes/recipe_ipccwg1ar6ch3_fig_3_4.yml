# ESMValTool
# recipe_ipccwg1ar6ch3_fig_3_2.yml
---
documentation:

  description: |
    Producing Fig. 3.2

  authors:
    - bock_lisa
    - eyring_veronika


preprocessors:

  preproc_map:
    regrid:
      target_grid: 1x1
      scheme: linear

  clim:
    regrid:
      target_grid: 1x1
      scheme: linear
    multi_model_statistics:
      span: overlap
      statistics: [mean]
      exclude: [reference_dataset]

  clim_wo_mmm:
    regrid:
      target_grid: 1x1
      scheme: linear

  clim_5x5:
    regrid:
      target_grid: 5x5
      scheme: linear



models_cmip6_piControl: &models_cmip6_piControl
  - {dataset: ACCESS-CM2, grid: gn, institute: CSIRO-ARCCSS, start_year: 950, end_year: 1149}
  - {dataset: ACCESS-ESM1-5, grid: gn, institute: CSIRO, start_year: 101, end_year: 1000}
  - {dataset: AWI-CM-1-1-MR, grid: gn, start_year: 2401, end_year: 2900}
  #- {dataset: AWI-ESM-1-1-LR, grid: gn, start_year: 1855, end_year: 1954} #zero not allowed as reference year
  - {dataset: BCC-CSM2-MR, grid: gn, start_year: 1850, end_year: 2449}
  - {dataset: BCC-ESM1, grid: gn, start_year: 1850, end_year: 2300}
  - {dataset: CAMS-CSM1-0, grid: gn, start_year: 2900, end_year: 3399}
  - {dataset: CanESM5, grid: gn, start_year: 5201, end_year: 6200}
  - {dataset: CAS-ESM2-0, grid: gn, institute: CAS, start_year: 1, end_year: 549}
  - {dataset: CESM2, grid: gn, start_year: 1, end_year: 1200}
  - {dataset: CESM2-FV2, institute: NCAR, grid: gn, start_year: 1, end_year: 500}
  - {dataset: CESM2-WACCM, institute: NCAR, grid: gn, start_year: 1, end_year: 499}
  - {dataset: CESM2-WACCM-FV2, institute: NCAR, grid: gn, start_year: 1, end_year: 500}
  - {dataset: CIESM, start_year: 1, end_year: 500}
  - {dataset: CMCC-CM2-SR5, grid: gn, start_year: 1850, end_year: 2099}
  - {dataset: CNRM-CM6-1, ensemble: r1i1p1f2, start_year: 1850, end_year: 2349}
  - {dataset: CNRM-CM6-1-HR, ensemble: r1i1p1f2, start_year: 1850, end_year: 2149}
  - {dataset: CNRM-ESM2-1, ensemble: r1i1p1f2, start_year: 1850, end_year: 2349}
  - {dataset: E3SM-1-0, start_year: 1, end_year: 500}
  #- {dataset: E3SM-1-1, institute: E3SM-Project, start_year: 1850, end_year: 2014} #IAV nan
  #- {dataset: E3SM-1-1-ECA, institute: E3SM-Project, start_year: 1850, end_year: 2014} #IAV nan
  - {dataset: EC-Earth3, start_year: 2259, end_year: 2759}
  - {dataset: EC-Earth3-LR, start_year: 2219, end_year: 2419}
  - {dataset: EC-Earth3-Veg, start_year: 1850, end_year: 2349}
  - {dataset: FGOALS-f3-L, start_year: 600, end_year: 1160}
  - {dataset: FGOALS-g3, grid: gn, start_year: 200, end_year: 899}
  - {dataset: FIO-ESM-2-0, grid: gn, start_year: 301, end_year: 875}
  #- {dataset: GFDL-CM4, grid: gr1, start_year: 151, end_year: 650} #permission denied
  - {dataset: GFDL-ESM4, grid: gr1, start_year: 151, end_year: 500}
  - {dataset: GISS-E2-1-G, grid: gn, start_year: 4150, end_year: 5000}
  #- {dataset: GISS-E2-1-G-CC, institute: NASA-GISS, grid: gn, start_year: 1850, end_year: 2014} #IAV nan
  - {dataset: GISS-E2-1-H, grid: gn, start_year: 3180, end_year: 3980}
  #- {dataset: GISS-E2-2-G, institute: NASA-GISS, grid: gn, start_year: 2000, end_year: 2150} #IAV nan
  - {dataset: HadGEM3-GC31-LL, grid: gn, start_year: 1850, end_year: 2349}
  - {dataset: HadGEM3-GC31-MM, grid: gn, start_year: 1850, end_year: 2349}
  - {dataset: IITM-ESM,  grid: gn, start_year: 1926,  end_year: 2125}
  - {dataset: INM-CM4-8, grid: gr1, start_year: 1850, end_year: 2380}
  - {dataset: INM-CM5-0, grid: gr1, start_year: 1996, end_year: 3196}
  - {dataset: IPSL-CM6A-LR, start_year: 1850, end_year: 2849}
  #- {dataset: KACE-1-0-G, start_year: 2300, end_year: 2449} #IAV nan
  - {dataset: MCM-UA-1-0, grid: gn, start_year: 1, end_year: 500}
  - {dataset: MIROC6, grid: gn, start_year: 3200, end_year: 3999}
  - {dataset: MIROC-ES2L, ensemble: r1i1p1f2, grid: gn, start_year: 1850, end_year: 2349}
  - {dataset: MPI-ESM-1-2-HAM, grid: gn, start_year: 1850, end_year: 2629}
  - {dataset: MPI-ESM1-2-HR, grid: gn, start_year: 1850, end_year: 2349}
  - {dataset: MPI-ESM1-2-LR, grid: gn, start_year: 1850, end_year: 2849}
  - {dataset: MRI-ESM2-0, grid: gn, start_year: 1850, end_year: 2550}
  - {dataset: NESM3, grid: gn, start_year: 500, end_year: 999}
  - {dataset: NorCPM1, institute: NCC, grid: gn, start_year: 1, end_year: 500}
  - {dataset: NorESM1-F, institute: NCC, grid: gn, start_year: 1501, end_year: 1700}
  - {dataset: NorESM2-LM, institute: NCC, grid: gn, start_year: 1600, end_year: 1799}
  - {dataset: NorESM2-MM, institute: NCC, grid: gn, start_year: 1200, end_year: 1699}
  - {dataset: SAM0-UNICON, grid: gn, start_year: 1, end_year: 700}
  - {dataset: TaiESM1, grid: gn, start_year: 201, end_year: 700}
  - {dataset: UKESM1-0-LL, ensemble: r1i1p1f2, grid: gn, start_year: 1960, end_year: 2709}


diagnostics:



  # **********************************************************************
  # IPCC WGI AR6, chap. 3
  # Sect. 3.3 
  # Fig 3.4
  # **********************************************************************
  # Lisa
  # **********************************************************************
  # Global climate variability - surface temperature
  # **********************************************************************

  fig_3_4:
    description: IPCC AR6 Ch. 3, Fig. 3.4 (near-surface temperature)
    variables:
      tas:
        preprocessor: clim_5x5
        mip: Amon
        project: CMIP6
        exp: piControl
        ensemble: r1i1p1f1
        grid: gr
        additional_datasets: *models_cmip6_piControl
      tasa:
        preprocessor: clim_5x5
        mip: Amon
        project: CMIP6
        exp: piControl
        ensemble: r1i1p1f1
        grid: gr
        start_year: 1850
        end_year: 1900
        additional_datasets:
          - {dataset: GISTEMP, project: OBS, type: ground, version: v4-all, start_year: 1880, tier: 2}
          - {dataset: CowtanWay, project: OBS, type: median, version: version2.0, tier: 2}
          - {dataset: HadCRUT5, project: OBS, type: mean, version: 5.0, tier: 2}
          #- {dataset: HadCRUT4, project: OBS, type: ground, version: 1, tier: 2}
          - {dataset: BerkeleyEarth, project: OBS, type: ground, version: 1, tier: 2}
    scripts:
      fig_3_4:
        script: ipcc_ar6/zonal_st_dev.ncl
        multi_model_mean: True
        time_avg: "yearly"
        plot_units: "degC"
        styleset: CMIP6


