# recipe_ipccwg1ar6ch3_santer20jclim.yml
---
documentation:
  description: |
    Recipe for reproducing the plots from B. D. Santer

  authors:
    - weigel_katja

  references:
    - santer20jclim

  projects:
    - eval4cmip
    - 4c

preprocessors:
  tropical_ocean:
    mask_landsea:
      mask_out: land
    regrid:
      target_grid: reference_dataset
      scheme: linear
    extract_region:
      start_latitude: -50
      end_latitude: 50
      start_longitude: 0
      end_longitude: 360

diagnostics:
  wvtrend:
    description: Plot figure from B. D. Santer with observations
    variables:
      prw:
        preprocessor: tropical_ocean
        reference_dataset: RSS
        mip: Amon
        field: T2Ms
        start_year: 1988
        end_year: 2019
        derive: false
    additional_datasets:
      - {dataset: RSS, project: OBS, type: reanaly_1, version: v07r01,
        tier: 2}
      - {dataset: ERA5, project: native6, type: reanaly, version: '1',
         tier: 3, start_year: 1988, end_year: 2019}
      - {dataset: ACCESS-CM2, project: CMIP6, ensemble: r(1:3)i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: ACCESS-ESM1-5, project: CMIP6, ensemble: r(1:10)i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: AWI-CM-1-1-MR, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CAMS-CSM1-0, project: CMIP6, ensemble: r2i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CanESM5-CanOE, project: CMIP6, ensemble: r(1:3)i1p2f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CanESM5, project: CMIP6, ensemble: r(2:25)i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CanESM5, project: CMIP6, ensemble: r(1:25)i1p2f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CESM2, project: CMIP6, ensemble: r4i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CESM2, project: CMIP6, ensemble: r(10:11)i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CESM2-WACCM, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CIESM, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: CMCC-CM2-SR5, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CMCC-ESM2, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: CNRM-CM6-1, project: CMIP6, ensemble: r(1:6)i1p1f2, exp: [historical, ssp585], grid: gr}
      - {dataset: CNRM-CM6-1-HR, project: CMIP6, ensemble: r1i1p1f2, exp: [historical, ssp585], grid: gr}
      - {dataset: CNRM-ESM2-1, project: CMIP6, ensemble: r(1:5)i1p1f2, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3-CC, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gr}
      #- {dataset: EC-Earth3, project: CMIP6, ensemble: r3i1p1f1, exp: [historical, ssp585], grid: gr} # concatenation error
      - {dataset: EC-Earth3, project: CMIP6, ensemble: r4i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3, project: CMIP6, ensemble: r6i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3, project: CMIP6, ensemble: r9i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3, project: CMIP6, ensemble: r11i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3, project: CMIP6, ensemble: r13i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3, project: CMIP6, ensemble: r(101:150)i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3-Veg, project: CMIP6, ensemble: r(1:4)i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3-Veg, project: CMIP6, ensemble: r6i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3-Veg, project: CMIP6, ensemble: r10i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3-Veg, project: CMIP6, ensemble: r12i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3-Veg, project: CMIP6, ensemble: r14i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: EC-Earth3-Veg-LR, project: CMIP6, ensemble: r(1:3)i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: FGOALS-g3, project: CMIP6, ensemble: r(2:4)i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: GFDL-CM4, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gr1}
      - {dataset: GFDL-ESM4, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gr1}
      - {dataset: GISS-E2-1-G, project: CMIP6, ensemble: r1i1p1f2, exp: [historical, ssp585], grid: gn}
      - {dataset: GISS-E2-1-G, project: CMIP6, ensemble: r(1:5)i1p3f1, exp: [historical, ssp585], grid: gn}
      - {dataset: GISS-E2-1-G, project: CMIP6, ensemble: r1i1p5f1, exp: [historical, ssp585], grid: gn}
      - {dataset: HadGEM3-GC31-LL, project: CMIP6, ensemble: r(1:4)i1p1f3, exp: [historical, ssp585], grid: gn}
      - {dataset: HadGEM3-GC31-MM, project: CMIP6, ensemble: r(1:4)i1p1f3, exp: [historical, ssp585], grid: gn}
      - {dataset: IPSL-CM6A-LR, project: CMIP6, ensemble: r(2:4)i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: IPSL-CM6A-LR, project: CMIP6, ensemble: r6i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: IPSL-CM6A-LR, project: CMIP6, ensemble: r14i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: KACE-1-0-G, project: CMIP6, ensemble: r(1:3)i1p1f1, exp: [historical, ssp585], grid: gr}
      - {dataset: KIOST-ESM, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gr1}
      - {dataset: MIROC6, project: CMIP6, ensemble: r(2:50)i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: MIROC-ES2L, project: CMIP6, ensemble: r(1:3)i1p1f2, exp: [historical, ssp585], grid: gn}
      - {dataset: MIROC-ES2L, project: CMIP6, ensemble: r10i1p1f2, exp: [historical, ssp585], grid: gn}
      - {dataset: MPI-ESM1-2-LR, project: CMIP6, ensemble: r(2:10)i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: NESM3, project: CMIP6, ensemble: r2i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: NorESM2-LM, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: TaiESM1, project: CMIP6, ensemble: r1i1p1f1, exp: [historical, ssp585], grid: gn}
      - {dataset: UKESM1-0-LL, project: CMIP6, ensemble: r(1:4)i1p1f2, exp: [historical, ssp585], grid: gn}
      - {dataset: UKESM1-0-LL, project: CMIP6, ensemble: r8i1p1f2, exp: [historical, ssp585], grid: gn}
      - {dataset: ACCESS1-0, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: ACCESS1-3, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: bcc-csm1-1-m, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: bcc-csm1-1, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: BNU-ESM, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: CanESM2, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:5)i1p1}
      - {dataset: CCSM4, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:6)i1p1}
      - {dataset: CESM1-BGC, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: CESM1-CAM5, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:3)i1p1}
      - {dataset: CESM1-WACCM, project: CMIP5, exp: [historical,rcp85], ensemble: r(2:4)i1p1}
      - {dataset: CMCC-CESM, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: CMCC-CM, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: CMCC-CMS, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: CNRM-CM5, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:2)i1p1}
      - {dataset: CNRM-CM5, project: CMIP5, exp: [historical,rcp85], ensemble: r4i1p1}
      - {dataset: CNRM-CM5, project: CMIP5, exp: [historical,rcp85], ensemble: r6i1p1}
      - {dataset: CNRM-CM5, project: CMIP5, exp: [historical,rcp85], ensemble: r10i1p1}
      - {dataset: CSIRO-Mk3-6-0, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:10)i1p1}
      #- {dataset: EC-EARTH, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1} # no data after 2009
      - {dataset: EC-EARTH, project: CMIP5, exp: [historical,rcp85], ensemble: r2i1p1}
      - {dataset: EC-EARTH, project: CMIP5, exp: [historical,rcp85], ensemble: r(7:9)i1p1}
      #- {dataset: EC-EARTH, project: CMIP5, exp: [historical,rcp85], ensemble: r11i1p1} # missing data
      - {dataset: EC-EARTH, project: CMIP5, exp: [historical,rcp85], ensemble: r12i1p1}
      #- {dataset: EC-EARTH, project: CMIP5, exp: [historical,rcp85], ensemble: r13i1p1} # missing data
      - {dataset: EC-EARTH, project: CMIP5, exp: [historical,rcp85], ensemble: r14i1p1}
      #- {dataset: FGOALS-g2, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:3)i1p1} # no data after 2005
      - {dataset: FGOALS-g2, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: FIO-ESM, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:3)i1p1}
      - {dataset: GFDL-CM3, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: GFDL-ESM2G, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: GFDL-ESM2M, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: GISS-E2-H-CC, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: GISS-E2-H, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:2)i1p1}
      - {dataset: GISS-E2-H, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p2}
      - {dataset: GISS-E2-H, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:2)i1p3}
      - {dataset: GISS-E2-R-CC, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: GISS-E2-R, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:2)i1p1}
      - {dataset: GISS-E2-R, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p2}
      - {dataset: GISS-E2-R, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:2)i1p3}
      - {dataset: HadGEM2-CC, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:3)i1p1}
      - {dataset: HadGEM2-ES, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:4)i1p1}
      - {dataset: inmcm4, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: IPSL-CM5A-LR, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:4)i1p1}
      - {dataset: IPSL-CM5A-MR, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: IPSL-CM5B-LR, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      #- {dataset: MIROC5, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1} # model failure
      - {dataset: MIROC5, project: CMIP5, exp: [historical,rcp85], ensemble: r(2:5)i1p1}
      - {dataset: MIROC-ESM-CHEM, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: MIROC-ESM, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: MPI-ESM-LR, project: CMIP5, exp: [historical,rcp85], ensemble: r(1:3)i1p1}
      - {dataset: MPI-ESM-MR, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: MRI-CGCM3, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      #- {dataset: MRI-ESM1, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1} # no data after 2005
      - {dataset: NorESM1-ME, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}
      - {dataset: NorESM1-M, project: CMIP5, exp: [historical,rcp85], ensemble: r1i1p1}

    scripts:
      santer20jclim:
        script: santer20jclim/santer20jclimfig.py
        # The mask for the RSS sampling can be produced with
        # esmvaltool/cmorizers/obs/cmorize_obs_rssanom.ncl
        # It has to be stored in the auxiliary_data_dir defined in config-user.yml
        # If the keyword filter is not given the recipe runs withoout filtering
        sample_obs: 'OBS_RSSANOM_filter_anom_v07r01_Amon_prw_198801-201912.nc'
        # Add model names for additional figure with pdf of ensemble members
        # add_model_dist: ['MPI-ESM1-2-LR', 'CanESM5']
