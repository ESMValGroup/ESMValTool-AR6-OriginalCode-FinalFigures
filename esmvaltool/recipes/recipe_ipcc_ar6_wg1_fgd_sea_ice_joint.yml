# ESMValTool
# recipe_ipcc_ar6_wg1_fgd_sea_ice_joint.yml
---
documentation:

  description: |
    plots scatter and timeseries plots 3_18 and 3_19 for IPCC AR6 WGI Ch 3

  authors:
    - malinina_elizaveta

preprocessors:
  regr_preproc:
    regrid:
      target_grid: 1x1
      lon_offset: True
      lat_offset: True
      scheme: nearest

models_cmip5_list: &models_cmip5_list
# CMIP5_ALL
 - {dataset: ACCESS1-0, project: CMIP5, ensemble: r1i1p1}
 - {dataset: ACCESS1-3, project: CMIP5, ensemble: r1i1p1}
 - {dataset: CanESM2, project: CMIP5, ensemble: "r(1:5)i1p1"}
 - {dataset: CCSM4, project: CMIP5, ensemble: "r(1:6)i1p1"}
 - {dataset: CESM1-BGC, project: CMIP5, ensemble: r1i1p1}
 - {dataset: CESM1-CAM5, project: CMIP5, ensemble: "r(1:3)i1p1"}
 - {dataset: CMCC-CM, project: CMIP5, ensemble: r1i1p1}
 - {dataset: CMCC-CMS, project: CMIP5, ensemble: r1i1p1}
 - {dataset: CNRM-CM5, project: CMIP5, ensemble: r1i1p1}
 - {dataset: CSIRO-Mk3-6-0, project: CMIP5, ensemble: "r(1:10)i1p1"}
 - {dataset: FGOALS-g2, project: CMIP5, ensemble: r1i1p1}
 - {dataset: GFDL-CM2p1, project: CMIP5, ensemble: "r(1:10)i1p1"}
 - {dataset: GFDL-CM3, project: CMIP5, ensemble: r1i1p1}
 - {dataset: GFDL-CM3, project: CMIP5, ensemble: r3i1p1}
 - {dataset: GFDL-CM3, project: CMIP5, ensemble: r5i1p1}
 - {dataset: GFDL-ESM2G, project: CMIP5, ensemble: r1i1p1}
 - {dataset: GFDL-ESM2M, project: CMIP5, ensemble: r1i1p1}
 - {dataset: GISS-E2-H, project: CMIP5, ensemble: "r(1:5)i1p1" }
 - {dataset: GISS-E2-H, project: CMIP5, ensemble: "r(1:5)i1p2" }
 - {dataset: GISS-E2-H, project: CMIP5, ensemble: "r(1:5)i1p3" }
 - {dataset: GISS-E2-H-CC, project: CMIP5, ensemble: r1i1p1}
 - {dataset: GISS-E2-R, project: CMIP5, ensemble: "r(1:6)i1p1"}
 - {dataset: GISS-E2-R, project: CMIP5, ensemble: "r(1:5)i1p2"}
 - {dataset: GISS-E2-R, project: CMIP5, ensemble: "r(1:6)i1p3"}
 - {dataset: GISS-E2-R-CC, project: CMIP5, ensemble: r1i1p1}
 - {dataset: HadCM3, project: CMIP5, ensemble: "r(1:10)i1p1"}
 - {dataset: HadGEM2-AO, project: CMIP5, ensemble: r1i1p1}
 - {dataset: HadGEM2-CC, project: CMIP5, ensemble: r1i1p1}
 - {dataset: HadGEM2-ES, project: CMIP5, ensemble: "r(1:4)i1p1"}
 - {dataset: IPSL-CM5A-LR, project: CMIP5, ensemble: "r(1:4)i1p1"}
 - {dataset: IPSL-CM5A-MR, project: CMIP5, ensemble: r1i1p1}
 - {dataset: IPSL-CM5B-LR, project: CMIP5, ensemble: r1i1p1}
 - {dataset: MIROC-ESM, project: CMIP5, ensemble: r1i1p1}
 - {dataset: MIROC-ESM-CHEM, project: CMIP5, ensemble: r1i1p1}
 - {dataset: MPI-ESM-LR, project: CMIP5, ensemble: "r(1:3)i1p1"}
 - {dataset: MPI-ESM-MR, project: CMIP5, ensemble: "r(1:3)i1p1"}
 - {dataset: MRI-CGCM3, project: CMIP5, ensemble: r1i1p1}
 - {dataset: NorESM1-M, project: CMIP5, ensemble: r1i1p1}
 - {dataset: NorESM1-ME, project: CMIP5, ensemble: r1i1p1}

models_cmip6_list: &models_cmip6_list
# CMIP6_ALL
 - {dataset: ACCESS-CM2, institute: CSIRO-ARCCSS, grid: gn, project: CMIP6, ensemble: r1i1p1f1}
 - {dataset: ACCESS-ESM1-5, grid: gn, project: CMIP6, ensemble: r1i1p1f1}
 - {dataset: ACCESS-ESM1-5, grid: gn, project: CMIP6, ensemble: r10i1p1f1}
 - {dataset: BCC-CSM2-MR, grid: gn, project: CMIP6, ensemble: r1i1p1f1}
 - {dataset: CAMS-CSM1-0, grid: gn, project: CMIP6, ensemble: "r(1:2)i1p1f1"}
 - {dataset: CanESM5, grid: gn, project: CMIP6, ensemble: "r(1:25)i1p1f1"}
 - {dataset: CanESM5, grid: gn, project: CMIP6, ensemble: "r(1:25)i1p2f1"}
 - {dataset: CESM2, grid: gn, project: CMIP6, ensemble: r4i1p1f1}
 - {dataset: CESM2, grid: gn, project: CMIP6, ensemble: "r(10:11)i1p1f1"}
 - {dataset: CNRM-CM6-1, grid: gn, project: CMIP6, ensemble: "r(1:6)i1p1f2"}
 - {dataset: CNRM-CM6-1-HR, grid: gn, project: CMIP6, ensemble: r1i1p1f2}
 - {dataset: CNRM-ESM2-1, grid: gn, project: CMIP6, ensemble: r1i1p1f2}
 - {dataset: EC-Earth3-Veg, grid: gn, project: CMIP6, ensemble: "r(4:6)i1p1f1"}
 - {dataset: EC-Earth3, grid: gn, project: CMIP6, ensemble: "r(1:2)i1p1f1"}
 - {dataset: EC-Earth3, grid: gn, project: CMIP6, ensemble: r4i1p1f1}
 - {dataset: EC-Earth3, grid: gn, project: CMIP6, ensemble: "r(6:7)i1p1f1"}
 - {dataset: EC-Earth3, grid: gn, project: CMIP6, ensemble: "r(10:25)i1p1f1"}
 - {dataset: FIO-ESM-2-0, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f1"}
 - {dataset: GFDL-ESM4, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f1"}
 - {dataset: HadGEM3-GC31-LL, grid: gn, project: CMIP6, ensemble: r1i1p1f3}
 - {dataset: HadGEM3-GC31-LL, grid: gn, project: CMIP6, ensemble: "r(3:4)i1p1f3"}
 - {dataset: INM-CM4-8, grid: gr1, project: CMIP6, ensemble: r1i1p1f1}
 - { dataset: INM-CM5-0, grid: gr1, project: CMIP6, ensemble: r1i1p1f1 }
 - {dataset: IPSL-CM6A-LR, grid: gn, project: CMIP6, ensemble: "r(1:6)i1p1f1"}
 - {dataset: IPSL-CM6A-LR, grid: gn, project: CMIP6, ensemble: "r(10:11)i1p1f1"}
 - {dataset: IPSL-CM6A-LR, grid: gn, project: CMIP6, ensemble: r14i1p1f1}
 - {dataset: IPSL-CM6A-LR, grid: gn, project: CMIP6, ensemble: r22i1p1f1}
 - {dataset: IPSL-CM6A-LR, grid: gn, project: CMIP6, ensemble: r25i1p1f1}
 - {dataset: MIROC6, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f1"}
 - {dataset: MIROC6, grid: gn, project: CMIP6, ensemble: "r(11:50)i1p1f1"}
 - { dataset: MIROC-ES2L, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f2" }
 - { dataset: MIROC-ES2L, grid: gn, project: CMIP6, ensemble: r5i1p1f2 }
 - { dataset: MIROC-ES2L, grid: gn, project: CMIP6, ensemble: "r(8:9)i1p1f2" }
 - { dataset: MPI-ESM1-2-HR,grid: gn, project: CMIP6, ensemble: "r(1:2)i1p1f1" }
 - { dataset: MPI-ESM1-2-LR, grid: gn, project: CMIP6, ensemble: "r(1:10)i1p1f1" }
 - { dataset: MRI-ESM2-0, grid: gn, project: CMIP6, ensemble: "r(1:5)i1p1f1" }
 - {dataset: NorESM2-LM, grid: gn,  project: CMIP6, ensemble: r2i1p1f1}
 - {dataset: NorESM2-MM, grid: gn,  project: CMIP6, ensemble: r2i1p1f1}
 - { dataset: TaiESM1, grid: gn, project: CMIP6, ensemble: r1i1p1f1 }
 - {dataset: UKESM1-0-LL, grid: gn,  project: CMIP6, ensemble: "r(1:4)i1p1f2"}
 - {dataset: UKESM1-0-LL, grid: gn,  project: CMIP6, ensemble: "r8i1p1f2"}

models_cmip5_nat: &models_cmip5_nat
 # CMIP5_NAT
 - { dataset: CanESM2, project: CMIP5, ensemble: "r(1:5)i1p1" }
 - { dataset: CNRM-CM5, project: CMIP5, ensemble: "r(1:5)i1p1" }
 - { dataset: CNRM-CM5, project: CMIP5, ensemble: r8i1p1 }
 - { dataset: CSIRO-Mk3-6-0, project: CMIP5, ensemble: "r(1:10)i1p1" }
 - { dataset: GISS-E2-H, project: CMIP5, ensemble: "r(1:5)i1p1" }
 - { dataset: GISS-E2-H, project: CMIP5, ensemble: "r(1:5)i1p3" }
 - { dataset: GISS-E2-R, project: CMIP5, ensemble: "r(1:5)i1p1" }
 - { dataset: GISS-E2-R, project: CMIP5, ensemble: "r(1:5)i1p3" }
 - { dataset: HadGEM2-ES, project: CMIP5, ensemble: "r(1:4)i1p1" }
 - { dataset: IPSL-CM5A-LR, project: CMIP5, ensemble: "r(1:3)i1p1" }
 - { dataset: IPSL-CM5A-MR, project: CMIP5, ensemble: "r(1:3)i1p1" } 
 - { dataset: NorESM1-M, project: CMIP5, ensemble: r1i1p1 }

models_cmip6_nat: &models_cmip6_nat
 # CMIP6_NAT
 - {dataset: ACCESS-ESM1-5, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f1"}
 - {dataset: BCC-CSM2-MR, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f1"}
 - { dataset: CanESM5, grid: gn, project: CMIP6, ensemble: "r(1:15)i1p1f1" } # should have been be to 25
 - { dataset: CanESM5, grid: gn, project: CMIP6, ensemble: "r(1:15)i1p2f1" } # should have been be to 25
 - { dataset: CNRM-CM6-1, grid: gn, project: CMIP6, ensemble: "r(1:10)i1p1f2" }
 - {dataset: GFDL-ESM4, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f1"}
 - { dataset: HadGEM3-GC31-LL, grid: gn, project: CMIP6, ensemble: "r(1:4)i1p1f3" }
 - { dataset: IPSL-CM6A-LR, grid: gn, project: CMIP6, ensemble: "r(1:10)i1p1f1" }
 - { dataset: MIROC6, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f1" } # should have been 1:50
 - { dataset: MIROC6, grid: gn, project: CMIP6, ensemble: r34i1p1f1 }
 - { dataset: MIROC6, grid: gn, project: CMIP6, ensemble: "r(47:48)i1p1f1" }
 - {dataset: MRI-ESM2-0, grid: gn, project: CMIP6, ensemble: "r(1:5)i1p1f1"}
 - {dataset: NorESM2-LM, grid: gn, project: CMIP6, ensemble: "r(1:3)i1p1f1"}

observations: &observations
  - {dataset: UHH-OSISAF, project: OBS, mip: OImon, tier: 2, type: clim, version: v2021}
  - {dataset: UHH-Bootstrap, project: OBS, mip: OImon, tier: 2, type: clim, version: v2021}
  - {dataset: UHH-NASATeam, project: OBS, mip: OImon, tier: 2, type: clim, version: v2021}

diagnostics:
  ipcc_ar6_wg1_fgd_3_18:
    description: plot the sie scatter plot, figure 3_18
    variables:
      sic_cmip5_hist_nh:
        short_name: sic
        preprocessor: regr_preproc
        mip: OImon
        exp: ['historical', 'rcp45']
        start_year: 1979
        end_year: 2017
        additional_datasets: *models_cmip5_list
      siconc_cmip6_hist:
        short_name: siconc
        preprocessor: regr_preproc
        mip: SImon
        exp: ['historical' , 'ssp245']
        start_year: 1979
        end_year: 2017
        additional_datasets: *models_cmip6_list
      siarean:
        start_year: 1979
        end_year: 2017
        additional_datasets: *observations
      siareas:
        start_year: 1979
        end_year: 2017
        additional_datasets: *observations

    scripts:
      ipcc_ar6_wg1_fgd_3_18:
        script: seaice/sie_ipcc_ar6_wg1_fgd_3_18.py
        mpl_style: ipcc_ar6_fgd
        seaiceextent: false # if sea ice extent is false, sea ice area is used instead
        month_latitude_NH: [9, 50.] # month and latitude for NH panel
        month_latitude_SH: [2, -50.] # month and latitude for SH panel

  ipcc_ar6_wg1_fgd_3_19:
    description: plot the sie timeseries figure 3.19
    variables:
      sic_cmip5_hist:
        short_name: sic
        preprocessor: regr_preproc
        mip: OImon
        exp: ['historical', 'rcp45']
        start_year: 1979
        end_year: 2017
        additional_datasets: *models_cmip5_list
      siconc_cmip6_hist:
        short_name: siconc
        preprocessor: regr_preproc
        mip: SImon
        exp: ['historical', 'ssp245']
        start_year: 1979
        end_year: 2017
        additional_datasets: *models_cmip6_list
      sic_cmip5_nat:
        short_name: sic
        preprocessor: regr_preproc
        mip: OImon
        exp: historicalNat
        start_year: 1979
        end_year: 2011
        additional_datasets: *models_cmip5_nat
      siconc_cmip6_nat:
        short_name: siconc
        preprocessor: regr_preproc
        mip: SImon
        exp: hist-nat
        start_year: 1979
        end_year: 2017
        additional_datasets: *models_cmip6_nat
      siarean:
        start_year: 1979
        end_year: 2017
        additional_datasets: *observations
      siareas:
        start_year: 1979
        end_year: 2017
        additional_datasets: *observations

    scripts:
      ipcc_ar6_wg1_fgd_3_19:
        script: seaice/sie_ipcc_ar6_wg1_fgd_3_19.py
        mpl_style: ipcc_ar6_fgd
        seaiceextent: false # if sea ice extent is false, sea ice area is used instead
        month_latitude_NH: [[3,6,9,12], 50.] # month and latitude for NH panel
        month_latitude_SH: [[2,6,9,12], -50.] # month and latitude for SH panel
        ref_period: [1979, 2017]
