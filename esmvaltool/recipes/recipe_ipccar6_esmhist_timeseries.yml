# ESMValTool
# recipe_ipcc6_co2.yml
---
documentation:

  description: |
    Producing selected figures from IPCC WGI AR6, chap. 3
  authors:
    - gier_bettina

#  maintainer:

  references:
    - flato13ipcc

  projects:
    - ipcc_ar6


preprocessors:

  fgco2_sum:
    custom_order: true
    regrid:
      target_grid: 2x2
      scheme: linear
    area_statistics:
      operator: sum
    mask_landsea:
      mask_out: land
    multi_model_statistics:
      span: overlap
      statistics: [mean]
      #exclude: [reference_dataset]


  glob_mean:
    area_statistics:
      operator: mean
    multi_model_statistics:
      span: overlap
      statistics: [mean]
      exclude: [reference_dataset]

  lm_sum:
    mask_landsea:
      mask_out: sea
    area_statistics:
      operator: sum
    multi_model_statistics:
      span: overlap
      statistics: [mean]
      exclude: [reference_dataset]

diagnostics:
  # **********************************************************************
  # IPCC WGI AR6, chap. 3
  # Sect. 3.6.1 (ZOD fig. 3.39)
  # **********************************************************************
  # Evaluation of atmospheric CO2, ocean carbon uptake, land carbon uptake
  # **********************************************************************
  # status:
  # **********************************************************************

  fig_3_38_co2:
    description: Evaluation of atmospheric CO2, ocean carbon uptake, land carbon uptake
    variables:
#      fgco2:
#        preprocessor: fgco2_sum
#        project: CMIP6
#        ensemble: r1i1p1f1
#        exp: esm-hist
#        mip: Omon
#        start_year: 1850
#        end_year: 2014 #2010
#        grid: gn
#        additional_datasets:
#          - {dataset: ACCESS-ESM1-5}
#          - {dataset: CanESM5}
#          - {dataset: CanESM5-CanOE, ensemble: r1i1p2f1}
#          #- {dataset: GFDL-ESM4, ensemble: r1i1p1f1, grid: gr1} #hus, zg retracted
#          - {dataset: MIROC-ES2L, ensemble: r1i1p1f2}
#          - {dataset: MPI-ESM1-2-LR}
#          - {dataset: MRI-ESM2-0, ensemble: r1i2p1f1}
#          - {dataset: NorESM2-LM}
#          - {dataset: UKESM1-0-LL, ensemble: r1i1p1f2}
#      fgco2_GCP:
#        short_name: fgco2
#        mip: Omon
#        reference_dataset: GCP
#        additional_datasets:
#          - {dataset: GCP, project: OBS, type: reanaly, version: 2018, tier: 2,
#             start_year: 1959, end_year: 2014, frequency: yr}
#
#      nbp:
#        preprocessor: lm_sum #glob_mean
#        project: CMIP6
#        ensemble: r1i1p1f1
#        exp: esm-hist
#        mip: Lmon
#        start_year: 1850
#        end_year: 2014 #2010
#        grid: gn
#        reference_dataset: GCP
#        additional_datasets:
#          - {dataset: ACCESS-ESM1-5}
#          - {dataset: CanESM5}
#          - {dataset: CanESM5-CanOE, ensemble: r1i1p2f1}
#          #- {dataset: GFDL-ESM4, ensemble: r1i1p1f1, grid: gr1} #hus, zg retracted
#          - {dataset: MIROC-ES2L, ensemble: r1i1p1f2}
#          - {dataset: MPI-ESM1-2-LR}
#          - {dataset: MRI-ESM2-0, ensemble: r1i2p1f1}
#          - {dataset: NorESM2-LM}
#          - {dataset: UKESM1-0-LL, ensemble: r1i1p1f2}
#          - {dataset: GCP, project: OBS, type: reanaly, version: 2018, tier: 2, start_year: 1959, end_year: 2014,
#             frequency: yr}
      co2s:
        preprocessor: glob_mean
        derive: true
        project: CMIP6
        ensemble: r1i1p1f1
        exp: esm-hist
        mip: Amon
        start_year: 1850
        end_year: 2014 #2010
        grid: gn
        #reference_dataset: ESRL
        additional_datasets:
          #- {dataset: ACCESS-ESM1-5}
          - {dataset: CanESM5}
          - {dataset: CanESM5-CanOE, ensemble: r1i1p2f1}
          #- {dataset: GFDL-ESM4, ensemble: r1i1p1f1, grid: gr1} #hus, zg retracted
          - {dataset: MIROC-ES2L, ensemble: r1i1p1f2}
          - {dataset: MPI-ESM1-2-LR}
          - {dataset: MRI-ESM2-0, ensemble: r1i2p1f1}
          - {dataset: NorESM2-LM}
          - {dataset: UKESM1-0-LL, ensemble: r1i1p1f2}
          #- {dataset: ESRL, project: OBS, type: ground, version: MLO, tier: 2,
          #   start_year: 1973, end_year: 2014, derive: false}
#      tas:
#        preprocessor: glob_mean
#        project: CMIP6
#        ensemble: r1i1p1f1
#        exp: esm-hist
#        mip: Amon
#        start_year: 1850
#        end_year: 2014 #2010
#        grid: gn
#        reference_dataset: CRU
#        additional_datasets:
#          - {dataset: ACCESS-ESM1-5}
#          - {dataset: CanESM5}
#          - {dataset: CanESM5-CanOE, ensemble: r1i1p2f1}
#          #- {dataset: GFDL-ESM4, ensemble: r1i1p1f1, grid: gr1} #hus, zg retracted
#          - {dataset: MIROC-ES2L, ensemble: r1i1p1f2}
#          - {dataset: MPI-ESM1-2-LR}
#          - {dataset: MRI-ESM2-0, ensemble: r1i2p1f1}
#          - {dataset: NorESM2-LM}
#          - {dataset: UKESM1-0-LL, ensemble: r1i1p1f2}
#          - {dataset: CRU, project: OBS, type: reanaly, version: TS4.02, tier: 2}
    scripts:
      fig_3_38_co2:
        script: ipcc_ar6/fig_carbonsinks_timeseries_panels.py
