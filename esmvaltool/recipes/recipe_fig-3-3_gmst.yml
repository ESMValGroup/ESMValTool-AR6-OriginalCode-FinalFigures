# ESMValTool
# recipe_fig3-3_gmst.yml
---
documentation:

  description: |
    Producing selected figures from IPCC WGI AR6, chap. 3

  authors:
    - bock_lisa
    - eyring_veronika
    - gillett_nathan

#  maintainer:
    
  references:
    - flato13ipcc

  projects:
    - ipcc_ar6


preprocessors:

  regrid_5_5:
    regrid:
      target_grid: 5x5
      scheme: linear


diagnostics:


  # **********************************************************************
  # Preprocess data by regridded to HadCRUT4 grid then run masking/blending and attribution code.
  # **********************************************************************

  fig_test_attribute:
    description: Test of masked and blended surface temperature.
    variables:
      tas: &tas_settings
        preprocessor: regrid_5_5   
        reference_dataset: HadCRUT4
        field: T2Ms
        mip: Amon
        project: CMIP6
        exp: [historical,ssp245]
        grid: gr
        start_year: 1850
        end_year: 2019
#        fx_files: [sftlf]
        additional_datasets: &damip_simulations
          - {dataset: IPSL-CM6A-LR, ensemble: r1i1p1f1}
          - {dataset: IPSL-CM6A-LR, ensemble: r2i1p1f1}
#          - {dataset: CESM2, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CNRM-CM6-1, ensemble: r1i1p1f2}
          - {dataset: CanESM5, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r2i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r3i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r4i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r5i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r6i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r7i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r8i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r9i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r10i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r11i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r12i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r13i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r14i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r15i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r16i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r17i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r18i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r19i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r20i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r21i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r22i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r23i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r24i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r25i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r1i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r2i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r3i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r4i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r5i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r6i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r7i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r8i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r9i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r10i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r11i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r12i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r13i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r14i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r15i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r16i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r17i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r18i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r19i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r20i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r21i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r22i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r23i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r24i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r25i1p2f1, grid: gn}
          - {dataset: HadGEM3-GC31-LL, ensemble: r1i1p1f3, grid: gn}
          - {dataset: HadGEM3-GC31-LL, ensemble: r2i1p1f3, grid: gn}
          - {dataset: HadGEM3-GC31-LL, ensemble: r3i1p1f3, grid: gn}
          - {dataset: HadGEM3-GC31-LL, ensemble: r4i1p1f3, grid: gn}
          - {dataset: MRI-ESM2-0, ensemble: r1i1p1f1, grid: gn}
          - {dataset: MRI-ESM2-0, ensemble: r2i1p1f1, grid: gn}
          - {dataset: MRI-ESM2-0, ensemble: r3i1p1f1, grid: gn}
          - {dataset: MRI-ESM2-0, ensemble: r4i1p1f1, grid: gn}
          - {dataset: MRI-ESM2-0, ensemble: r5i1p1f1, grid: gn}
          - {dataset: MIROC6, ensemble: r1i1p1f1, grid: gn}
          - {dataset: MIROC6, ensemble: r2i1p1f1, grid: gn}
          - {dataset: MIROC6, ensemble: r3i1p1f1, grid: gn}
          - {dataset: CAMS-CSM1-0, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CAMS-CSM1-0, ensemble: r2i1p1f1, grid: gn}
#          - {dataset: CESM2-WACCM, ensemble: r1i1p1f1, grid: gn}#lat,lon contcatenate error.
          - {dataset: CNRM-ESM2-1, ensemble: r1i1p1f2}
#          - {dataset: EC-Earth3-Veg, ensemble: r1i1p1f1} #time coordinate error
#          - {dataset: EC-Earth3-Veg, ensemble: r4i1p1f1}
          - {dataset: EC-Earth3, ensemble: r4i1p1f1}
          - {dataset: EC-Earth3, ensemble: r6i1p1f1}
          - {dataset: EC-Earth3, ensemble: r9i1p1f1}
          - {dataset: EC-Earth3, ensemble: r11i1p1f1}
          - {dataset: EC-Earth3, ensemble: r13i1p1f1}
          - {dataset: EC-Earth3, ensemble: r15i1p1f1}
          - {dataset: MIROC-ES2L, ensemble: r1i1p1f2, grid: gn}
#          - {dataset: NESM3, ensemble: r1i1p1f1, grid: gn} #problem with time coordinate.
#          - {dataset: NESM3, ensemble: r2i1p1f1, grid: gn} 
#          - {dataset: UKESM1-0-LL, ensemble: r1i1p1f2, grid: gn} #problem reading times.
#          - {dataset: UKESM1-0-LL, ensemble: r2i1p1f2, grid: gn}
#          - {dataset: UKESM1-0-LL, ensemble: r3i1p1f2, grid: gn}
#          - {dataset: UKESM1-0-LL, ensemble: r4i1p1f2, grid: gn}
#          - {dataset: UKESM1-0-LL, ensemble: r8i1p1f2, grid: gn}
#        additional_datasets:
#          - {dataset: GFDL-CM4, ensemble: r1i1p1f1, grid: gr1} #gr1 causes problems for tos.
#          - {dataset: GFDL-ESM4, ensemble: r1i1p1f1, grid: gr1}


      tos:
        <<: *tas_settings
        mip: Omon
        grid: gn
#        additional_datasets:
#          - {dataset: GFDL-CM4, ensemble: r1i1p1f1} 
#          - {dataset: GFDL-ESM4, ensemble: r1i1p1f1}

      siconc:
        <<: *tas_settings
        mip: SImon
        grid: gn
#        additional_datasets:
#          - {dataset: GFDL-CM4, ensemble: r1i1p1f1} 
#          - {dataset: GFDL-ESM4, ensemble: r1i1p1f1}


    scripts:
      fig-3-3: 
        script: ipcc_ar6/gmst_vs_gsat.py



