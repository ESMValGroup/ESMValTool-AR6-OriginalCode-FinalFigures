# ESMValTool
# test_script.yml
---
documentation:

  description: 
     Regrid to 5x5 grid

  authors:
    - schurer_andrew

  references:
    - schurer20erl

  projects:
    - esmval

preprocessors:
  regrid_preprocessor:
    regrid:
      target_grid: 2.5x2.5
      lon_offset: True
      lat_offset: True
      scheme: linear  

diagnostics:
  schurer20_figs:
    description: Preprocess data needed for Schurer et al. (2020) figures.
    variables:
      pr:
        preprocessor: regrid_preprocessor  
        mip: Amon
        project: CMIP6
        exp: [historical,ssp245]
        grid: gn
        start_year: 1980
        end_year: 2020
        additional_datasets:
          - {dataset: ERA5, project: OBS6, tier: 3, type: reanaly, version: v1}
          - {dataset: GPCP-SG, project: OBS, tier: 2, type: atmos, version: V2.3}
          - {dataset: ACCESS-ESM1-5, ensemble: r1i1p1f1}
          #- {dataset: ACCESS-CM2, ensemble: r1i1p1f1} #searching for CSIRO-ARCCSS-BoM should be CSIRO-ARCCSS
          #- {dataset: AWI-CM-1-1-MR, ensemble: r1i1p1f1}
          - {dataset: BCC-CSM2-MR, ensemble: r1i1p1f1}
          - {dataset: CAMS-CSM1-0, ensemble: r1i1p1f1}
          - {dataset: CanESM5, ensemble: r(1:10)i1p1f1}
          - {dataset: CanESM5, ensemble: r(1:10)i1p2f1}
          - {dataset: CESM2-WACCM, ensemble: r(1:3)i1p1f1}
          #- {dataset: CMCC-CM2-SR5, ensemble: r(1:3)i1p1f1}
          - {dataset: CNRM-CM6-1, ensemble: r(1:6)i1p1f2, grid: gr}
          - {dataset: FGOALS-g3, ensemble: r1i1p1f1}
          - {dataset: FIO-ESM-2-0, ensemble: r1i1p1f1}
          - {dataset: GFDL-ESM4, ensemble: r1i1p1f1, grid: gr1}
          - {dataset: HadGEM3-GC31-LL, ensemble: r(1:4)i1p1f3}
          - {dataset: IITM-ESM, ensemble: r1i1p1f1}
          - {dataset: IPSL-CM6A-LR, ensemble: r(1:6)i1p1f1, grid: gr}
          - {dataset: MPI-ESM1-2-HR, ensemble: r1i1p1f1}
          - {dataset: MIROC6, ensemble: r(1:10)i1p1f1}
          #- {dataset: MIROC-ES2L, ensemble: r1i1p1f1}
          - {dataset: MRI-ESM2-0, ensemble: r(1:5)i1p1f1}
          - {dataset: NESM3, ensemble: r1i1p1f1}
          #- {dataset: NorESM2-LM, ensemble: r1i1p1f1}#won't concatenate
          - {dataset: NorESM2-MM, ensemble: r1i1p1f1}
          - {dataset: UKESM1-0-LL, ensemble: r(1:4)i1p1f2}
          - {dataset: UKESM1-0-LL, ensemble: r8i1p1f2}
          - {dataset: UKESM1-0-LL, ensemble: r13i1p1f2}
          - {dataset: ACCESS-ESM1-5, ensemble: r1i1p1f1, exp: piControl, start_year: 101, end_year: 1000}
          #- {dataset: ACCESS-CM2, ensemble: r1i1p1f1, exp: piControl, start_year: 101, end_year: 1000}
          #- {dataset: AWI-CM-1-1-MR, ensemble: r1i1p1f1, exp: piControl, start_year: 101, end_year: 1000}
          - {dataset: BCC-CSM2-MR, ensemble: r1i1p1f1, exp: piControl, start_year: 1850, end_year: 2449}
          - {dataset: CAMS-CSM1-0, ensemble: r1i1p1f1, exp: piControl, start_year: 2900, end_year: 3399}
          - {dataset: CanESM5, ensemble: r1i1p1f1, exp: piControl, start_year: 5201, end_year: 6200}
          - {dataset: CanESM5, ensemble: r1i1p2f1, exp: piControl, start_year: 5550, end_year: 6000}
          - {dataset: CESM2-WACCM, ensemble: r1i1p1f1, exp: piControl, start_year: 1, end_year: 499}
          #- {dataset: CMCC-CM2-SR5, ensemble: r1i1p1f1, exp: piControl, start_year: 101, end_year: 1000}
          - {dataset: CNRM-CM6-1, ensemble: r1i1p1f2, exp: piControl, grid: gr, start_year: 1950, end_year: 2349}
          - {dataset: FGOALS-g3, ensemble: r1i1p1f1, exp: piControl, start_year: 200, end_year: 899}
          #- {dataset: FIO-ESM-2-0, ensemble: r1i1p1f1, exp: piControl, start_year: 101, end_year: 1000}  #no pr
          - {dataset: GFDL-ESM4, ensemble: r1i1p1f1, grid: gr1, exp: piControl, start_year: 101, end_year: 500}
          - {dataset: HadGEM3-GC31-LL, ensemble: r1i1p1f1, exp: piControl, start_year: 1850, end_year: 2349}
          - {dataset: IITM-ESM, ensemble: r1i1p1f1, exp: piControl, start_year: 1926, end_year: 2125}
          - {dataset: IPSL-CM6A-LR, ensemble: r1i1p1f1, grid: gr, exp: piControl, start_year: 1850, end_year: 3849}
          - {dataset: IPSL-CM6A-LR, ensemble: r1i2p1f1, grid: gr, exp: piControl, start_year: 1850, end_year: 2099}  
          - {dataset: MPI-ESM1-2-HR, ensemble: r1i1p1f1, exp: piControl, start_year: 1850, end_year: 2349}
          - {dataset: MIROC6, ensemble: r1i1p1f1, exp: piControl, start_year: 3200, end_year: 3999}
          #- {dataset: MIROC-ES2L, ensemble: r1i1p1f1, exp: piControl, start_year: 101, end_year: 1000}
          - {dataset: MRI-ESM2-0, ensemble: r1i1p1f1, exp: piControl, start_year: 1850, end_year: 2550}
          - {dataset: NESM3, ensemble: r1i1p1f1, exp: piControl, start_year: 500, end_year: 999}
          #- {dataset: NorESM2-LM, ensemble: r1i1p1f1, exp: piControl, start_year: 1600, end_year: 1709}
          - {dataset: NorESM2-MM, ensemble: r1i1p1f1, exp: piControl, start_year: 1200, end_year: 1699}
          - {dataset: UKESM1-0-LL, ensemble: r1i1p1f2, exp: piControl, start_year: 1960, end_year: 3839}

    scripts:
      script1:
        script: aschurer/WetDry_timeseries_smooth_scaling1.py
