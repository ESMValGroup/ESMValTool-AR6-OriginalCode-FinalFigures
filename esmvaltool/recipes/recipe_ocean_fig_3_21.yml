# ESMValTool
# recipe_OceanPhysics.yml
---
documentation:
  description: |
    Recipe to produce figure 3.5 for IPCC WG1

  authors:
    - demora_lee

  references:
    - demora2018gmd

  projects:
    - ukesm


# TODO: Add additional models.
# TODO: Add multi_model_statistics
# TODO: Increase range.
# TODO: Figure out the observational data. CORA is not gridded.

preprocessors:
  prep_3_21:
    custom_order: true
    # extract_levels:
    #   levels:  [0., ]
    #   scheme: linear_horizontal_extrapolate_vertical
    # time_average:
    climate_statistics:
      operator: mean
      period: full
    regrid:
      target_grid: 1x1
      scheme: linear
    extract_region:
      start_longitude: 0.
      end_longitude: 360.
      start_latitude: -70.
      end_latitude: 70.
    # multi_model_statistics:
    #   span: overlap
    #   statistics: [mean ]

diagnostics:
  diag_3_21:
    variables:
      sos: # Salinity ocean surface 2D
        preprocessor: prep_3_21
        field: TOsM
        project: CMIP5
        mip: Omon
        ensemble: r1i1p1
        additional_datasets:
        # CanESM2, HadGEM2-ES, GFDL-ESM2M, MPI-ESM-MR
        # - {dataset: HadGEM2-ES, exp: historical, start_year: 1950, end_year: 1950}
        # - {dataset: HadGEM2-ES, exp: historical, start_year: 2000, end_year: 2000}
        # - {dataset: HadGEM2-ES, exp: historical, start_year: 1950, end_year: 2000}
        # - {dataset: HadGEM2-ES, exp: rcp85,      start_year: 2050, end_year: 2050}
        # - {dataset: HadGEM2-ES, exp: rcp85,      start_year: 2099, end_year: 2099}
        # - {dataset: HadGEM2-ES, exp: rcp85,      start_year: 2050, end_year: 2099}

        - {dataset: CanESM2, exp: historical, start_year: 1950, end_year: 1950}
        - {dataset: CanESM2, exp: historical, start_year: 2000, end_year: 2000}
        - {dataset: CanESM2, exp: historical, start_year: 1950, end_year: 2000}
        - {dataset: CanESM2, exp: rcp85,      start_year: 2050, end_year: 2050}
        - {dataset: CanESM2, exp: rcp85,      start_year: 2099, end_year: 2099}
        - {dataset: CanESM2, exp: rcp85,      start_year: 2050, end_year: 2099}

        - {dataset: GFDL-ESM2M, exp: historical, start_year: 1950, end_year: 1950}
        - {dataset: GFDL-ESM2M, exp: historical, start_year: 2000, end_year: 2000}
        - {dataset: GFDL-ESM2M, exp: historical, start_year: 1950, end_year: 2000}
        - {dataset: GFDL-ESM2M, exp: rcp85,      start_year: 2050, end_year: 2050}
        - {dataset: GFDL-ESM2M, exp: rcp85,      start_year: 2099, end_year: 2099}
        - {dataset: GFDL-ESM2M, exp: rcp85,      start_year: 2050, end_year: 2099}

        - {dataset: MPI-ESM-MR, exp: historical, start_year: 1950, end_year: 1950}
        - {dataset: MPI-ESM-MR, exp: historical, start_year: 2000, end_year: 2000}
        - {dataset: MPI-ESM-MR, exp: historical, start_year: 1950, end_year: 2000}
        - {dataset: MPI-ESM-MR, exp: rcp85,      start_year: 2050, end_year: 2050}
        - {dataset: MPI-ESM-MR, exp: rcp85,      start_year: 2099, end_year: 2099}
        - {dataset: MPI-ESM-MR, exp: rcp85,      start_year: 2050, end_year: 2099}

    #   sos: # Salinity ocean surface 2D
    #     preprocessor: prep_3_21
    #     field: TOsM
    #     additional_datasets:
    #     - {dataset: HadGEM2-ES, project: CMIP5, mip: Omon, exp: historical, ensemble: r1i1p1, start_year: 1950, end_year: 1950}
    #     - {dataset: HadGEM2-ES, project: CMIP5, mip: Omon, exp: historical, ensemble: r1i1p1, start_year: 2000, end_year: 2000}
    #     - {dataset: HadGEM2-ES, project: CMIP5, mip: Omon, exp: historical, ensemble: r1i1p1, start_year: 1950, end_year: 2000}
    #     - {dataset: HadGEM2-ES, project: CMIP5, mip: Omon, exp: rcp85,      ensemble: r1i1p1, start_year: 2050, end_year: 2050}
    #     - {dataset: HadGEM2-ES, project: CMIP5, mip: Omon, exp: rcp85,      ensemble: r1i1p1, start_year: 2099, end_year: 2099}
    #     - {dataset: HadGEM2-ES, project: CMIP5, mip: Omon, exp: rcp85,      ensemble: r1i1p1, start_year: 2050, end_year: 2099}
    scripts:
      diagnostic_3_21:
        script: ocean/diagnostic_fig_3_21.py
