# ESMValTool
# --------------------------------
# Note: at least 10 models per experiment and 15 years long simulations
#       - otherwise the diagnostic fails
---
documentation:

  description: |
    Producing "modes" figures with code from Adam Phillips

  authors:
    - karmouche_soufiane
    - bock_lisa
    - kosaka_yu
    
  #references:

  projects:
    - ipcc_ar6


preprocessors:
  psl_am:
    regrid:
      target_grid: 2x5
      lon_offset: True
      lat_offset: False
      scheme: linear

  temp_tr:
    regrid:
      target_grid: 2x2
      scheme: linear

  enso:
    regrid:
      target_grid: 2x2
      scheme: linear
    multi_model_statistics:
      span: overlap
      statistics: [mean]
      exclude: [reference_dataset]


diagnostics:

  # **********************************************************************
  # IPCC WGI AR6, chap. 3
  # Sect. 3.3
  # Fig 3.33
  # **********************************************************************
  # Model evaluation of NAM, NAO and SAM in boreal winter.
  # **********************************************************************

  nam_nao_sam:
    description: IPCC AR6 Ch. 3, Fig. 3.33 (sea level pressure)
    themes:
      - phys
    realms:
      - atmos
    variables:
      psl_cmip6: &var_def_1
        short_name: psl
        reference_dataset: JRA-55
        mip: Amon
        project: CMIP6
        exp: historical
        ensemble: r1i1p1f1
        grid: gn
        start_year: 1958
        end_year: 2014
        additional_datasets:
          - {dataset: ACCESS-CM2, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: ACCESS-ESM1-5, ensemble: r(1:20)i1p1f1, grid: gn}
          - {dataset: AWI-CM-1-1-MR, ensemble: r(1:5)i1p1f1, grid: gn}
          - {dataset: AWI-ESM-1-1-LR, ensemble: r1i1p1f1, grid: gn}
          - {dataset: BCC-CSM2-MR, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: BCC-ESM1, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: CAMS-CSM1-0, ensemble: r(1:2)i1p1f1, grid: gn}
          - {dataset: CAMS-CSM1-0, ensemble: r1i1p1f2, grid: gn}
          #- {dataset: CAS-ESM2-0, ensemble: r(1:4)i1p1f1, grid: gn} #rejected
          - {dataset: CanESM5, ensemble: r(1:25)i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r(1:40)i1p2f1, grid: gn}
          - {dataset: CanESM5-CanOE, ensemble: r(1:3)i1p2f1, grid: gn}
          - {dataset: CESM2, ensemble: r(1:11)i1p1f1, grid: gn}
          - {dataset: CESM2-FV2, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: CESM2-WACCM, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: CESM2-WACCM-FV2, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: CIESM, ensemble: r(1:3)i1p1f1, grid: gr}
          - {dataset: CMCC-CM2-HR4, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CMCC-CM2-SR5, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CMCC-ESM2, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CNRM-CM6-1, ensemble: r(1:30)i1p1f2, grid: gr}
          - {dataset: CNRM-CM6-1-HR, ensemble: r1i1p1f2, grid: gr}
          - {dataset: CNRM-ESM2-1, ensemble: r(1:5)i1p1f2, grid: gr}
          - {dataset: CNRM-ESM2-1, ensemble: r(7:11)i1p1f2, grid: gr}
          - {dataset: E3SM-1-0, ensemble: r(1:5)i1p1f1, grid: gr}
          - {dataset: E3SM-1-1, ensemble: r1i1p1f1, grid: gr}
          - {dataset: E3SM-1-1-ECA, ensemble: r1i1p1f1, grid: gr}
          - {dataset: EC-Earth3, ensemble: r(1:4)i1p1f1, grid: gr}
          - {dataset: EC-Earth3, ensemble: r(6:7)i1p1f1, grid: gr}
          - {dataset: EC-Earth3, ensemble: r(9:25)i1p1f1, grid: gr}
          - {dataset: EC-Earth3-AerChem, ensemble: r1i1p1f1, grid: gr}
          - {dataset: EC-Earth3-AerChem, ensemble: r4i1p1f1, grid: gr}
          - {dataset: EC-Earth3-CC, ensemble: r1i1p1f1, grid: gr}
          - {dataset: EC-Earth3-Veg, ensemble: r(1:6)i1p1f1, grid: gr}
          - {dataset: EC-Earth3-Veg, ensemble: r12i1p1f1, grid: gr}
          - {dataset: EC-Earth3-Veg, ensemble: r14i1p1f1, grid: gr}
          - {dataset: EC-Earth3-Veg-LR, ensemble: r(1:3)i1p1f1, grid: gr}
          - {dataset: FGOALS-f3-L, ensemble: r(1:3)i1p1f1, grid: gr}
          - {dataset: FGOALS-g3, ensemble: r(1:6)i1p1f1, grid: gn}
          - {dataset: FIO-ESM-2-0, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: GFDL-CM4, ensemble: r1i1p1f1, grid: gr1}
          - {dataset: GFDL-ESM4, ensemble: r(1:3)i1p1f1, grid: gr1}
          - {dataset: GISS-E2-1-G, ensemble: r(1:9)i1p1f1, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r(1:11)i1p1f2, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r(1:5)i1p1f3, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r(1:6)i1p3f1, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r(8:10)i1p3f1, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r(1:4)i1p5f1, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r(6:10)i1p5f1, grid: gn}
          - {dataset: GISS-E2-1-G-CC, ensemble: r1i1p1f1, grid: gn}
          - {dataset: GISS-E2-1-H, ensemble: r(1:10)i1p1f1, grid: gn}
          - {dataset: GISS-E2-1-H, ensemble: r(1:5)i1p1f2, grid: gn}
          - {dataset: HadGEM3-GC31-LL, ensemble: r(1:4)i1p1f3, grid: gn}
          - {dataset: HadGEM3-GC31-MM, ensemble: r(1:4)i1p1f3, grid: gn}
          - {dataset: IITM-ESM, ensemble: r1i1p1f1, grid: gn}
          - {dataset: INM-CM4-8, ensemble: r1i1p1f1, grid: gr1}
          - {dataset: INM-CM5-0, ensemble: r(1:10)i1p1f1, grid: gr1}
          - {dataset: IPSL-CM5A2-INCA, ensemble: r1i1p1f1, grid: gr}
          - {dataset: IPSL-CM6A-LR, ensemble: r(1:32)i1p1f1, grid: gr}
          - {dataset: KACE-1-0-G, ensemble: r(1:3)i1p1f1, grid: gr}
          - {dataset: KIOST-ESM, ensemble: r1i1p1f1, grid: gr1}
          - {dataset: MCM-UA-1-0, ensemble: r1i1p1f1, grid: gn}
          - {dataset: MCM-UA-1-0, ensemble: r1i1p1f2, grid: gn}
          - {dataset: MIROC6, ensemble: r(1:50)i1p1f1, grid: gn}
          - {dataset: MIROC-ES2L, ensemble: r(1:10)i1p1f2, grid: gn}
          - {dataset: MPI-ESM-1-2-HAM, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: MPI-ESM1-2-HR, ensemble: r(1:10)i1p1f1, grid: gn}
          - {dataset: MPI-ESM1-2-LR, ensemble: r(1:10)i1p1f1, grid: gn}
          - {dataset: MRI-ESM2-0, ensemble: r(1:5)i1p1f1, grid: gn}
          - {dataset: NESM3, ensemble: r(1:5)i1p1f1, grid: gn}
          - {dataset: NorCPM1, ensemble: r(1:30)i1p1f1, grid: gn}
          - {dataset: NorESM2-LM, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: NorESM2-MM, ensemble: r(1:2)i1p1f1, grid: gn}
          - {dataset: SAM0-UNICON, ensemble: r1i1p1f1, grid: gn}
          - {dataset: TaiESM1, ensemble: r1i1p1f1, grid: gn}
          - {dataset: UKESM1-0-LL, ensemble: r(1:4)i1p1f2, grid: gn}
          - {dataset: UKESM1-0-LL, ensemble: r(16:19)i1p1f2, grid: gn}
          # OBSERVATIONS:
          - {dataset: 20CRv3, project: OBS, type: reanaly, version: mean, tier: 2, start_year:  1958, end_year:  2014}
          - {dataset: JRA-55, project: OBS, type: reanaly, version: 1, tier: 3, start_year:  1958, end_year:  2014}
          - {dataset: ERA5, project: OBS, type: reanaly, version: 1, tier: 3, start_year:  1958, end_year:  2014}
      psl_amip6:
        <<: *var_def_1
        exp: amip-hist
        additional_datasets:
          - {dataset: BCC-CSM2-MR, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CAMS-CSM1-0, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r(1:3)i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r5i1p2f1, grid: gn}
          - {dataset: CanESM5, ensemble: r(7:10)i1p2f1, grid: gn}
          - {dataset: CESM2, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: CNRM-CM6-1, ensemble: r(1:10)i1p1f2, grid: gr}
          - {dataset: CNRM-ESM2-1, ensemble: r1i1p1f2, grid: gr}
          - {dataset: FGOALS-f3-L, ensemble: r(1:3)i1p1f1, grid: gr}
          - {dataset: FIO-ESM-2-0, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: GFDL-CM4, ensemble: r(2:3)i1p1f1, grid: gr1}
          - {dataset: IPSL-CM6A-LR, ensemble: r(1:3)i1p1f1, grid: gr}
          - {dataset: MIROC6, ensemble: r(1:5)i1p1f1, grid: gn}
          - {dataset: MRI-ESM2-0, ensemble: r(1:5)i1p1f1, grid: gn}
      psl_cmip5:
        <<: *var_def_1
        project: CMIP5
        ensemble: r1i1p1
        start_year: 1958
        end_year: 2005
        exp: historical
        additional_datasets:
          - {dataset: ACCESS1-0, ensemble: r1i1p1}
          - {dataset: ACCESS1-3, ensemble: r(1:3)i1p1}
          - {dataset: BNU-ESM, ensemble: r1i1p1}
          - {dataset: CCSM4, ensemble: r(1:6)i1p1}
          - {dataset: CESM1-BGC, ensemble: r1i1p1}
          - {dataset: CESM1-CAM5, ensemble: r(1:3)i1p1}
          #- {dataset: CESM1-CAM5-1-FV2, ensemble: r(1:4)i1p1}
          - {dataset: CESM1-FASTCHEM, ensemble: r(1:3)i1p1}
          - {dataset: CESM1-WACCM, ensemble: r(1:4)i1p1}
          - {dataset: CMCC-CESM, ensemble: r1i1p1}
          - {dataset: CMCC-CM, ensemble: r1i1p1}
          - {dataset: CMCC-CMS, ensemble: r1i1p1}
          - {dataset: CNRM-CM5, ensemble: r(1:10)i1p1}
          - {dataset: CNRM-CM5-2, ensemble: r1i1p1}
          - {dataset: CSIRO-Mk3-6-0, ensemble: r(1:10)i1p1}
          #- {dataset: CSIRO-Mk3L-1-2, ensemble: r(1:3)i2p1}
          #- {dataset: CanCM4, ensemble: r(1:10)i1p1} missing 1958-1960
          - {dataset: CanESM2, ensemble: r(1:5)i1p1}
          - {dataset: EC-EARTH, ensemble: r(1:2)i1p1}
          - {dataset: EC-EARTH, ensemble: r6i1p1}
          - {dataset: EC-EARTH, ensemble: r(8:9)i1p1}
          - {dataset: EC-EARTH, ensemble: r(12:14)i1p1}
          - {dataset: FGOALS-g2, ensemble: r(1:5)i1p1}
          - {dataset: FGOALS-s2, ensemble: r(2:3)i1p1}
          - {dataset: FIO-ESM, ensemble: r(1:3)i1p1}
          - {dataset: GFDL-CM2p1, ensemble: r(1:10)i1p1}
          - {dataset: GFDL-CM3, ensemble: r(1:3)i1p1}
          - {dataset: GFDL-ESM2G, ensemble: r1i1p1}
          - {dataset: GFDL-ESM2M, ensemble: r1i1p1}
          - {dataset: GISS-E2-H, ensemble: r(1:6)i1p1}
          - {dataset: GISS-E2-H, ensemble: r(1:6)i1p2}
          - {dataset: GISS-E2-H, ensemble: r(1:6)i1p3}
          - {dataset: GISS-E2-H-CC, ensemble: r1i1p1}
          - {dataset: GISS-E2-R, ensemble: r(1:6)i1p1}
          - {dataset: GISS-E2-R, ensemble: r(1:5)i1p2}
          - {dataset: GISS-E2-R, ensemble: r(1:6)i1p3}
          - {dataset: GISS-E2-R-CC, ensemble: r1i1p1}
          - {dataset: HadCM3, ensemble: r(1:10)i1p1}
          - {dataset: HadGEM2-AO, ensemble: r1i1p1}
          - {dataset: HadGEM2-CC, ensemble: r1i1p1, exp: [historical, rcp45]}
          - {dataset: HadGEM2-ES, ensemble: r1i1p1, exp: [historical, rcp45]}
          - {dataset: HadGEM2-ES, ensemble: r(2:3)i1p1}
          - {dataset: HadGEM2-ES, ensemble: r4i1p1, exp: [historical, rcp45]}
          - {dataset: HadGEM2-ES, ensemble: r5i1p1}
          - {dataset: IPSL-CM5A-LR, ensemble: r(1:6)i1p1}
          - {dataset: IPSL-CM5A-MR, ensemble: r(1:3)i1p1}
          - {dataset: IPSL-CM5B-LR, ensemble: r1i1p1}
          - {dataset: MIROC-ESM, ensemble: r(1:3)i1p1}
          - {dataset: MIROC-ESM-CHEM, ensemble: r1i1p1}
          - {dataset: MIROC4h, ensemble: r(1:3)i1p1}
          - {dataset: MIROC5, ensemble: r(1:5)i1p1}
          - {dataset: MPI-ESM-LR, ensemble: r(1:3)i1p1}
          - {dataset: MPI-ESM-MR, ensemble: r(1:3)i1p1}
          - {dataset: MPI-ESM-P, ensemble: r(1:2)i1p1}
          - {dataset: MRI-CGCM3, ensemble: r(1:3)i1p1}
          - {dataset: MRI-CGCM3, ensemble: r(4:5)i1p2}
          - {dataset: MRI-ESM1, ensemble: r1i1p1}
          - {dataset: NorESM1-M, ensemble: r(1:3)i1p1}
          - {dataset: NorESM1-ME, ensemble: r1i1p1}
          - {dataset: bcc-csm1-1, ensemble: r(1:3)i1p1}
          - {dataset: bcc-csm1-1-m, ensemble: r(1:3)i1p1}
          - {dataset: inmcm4, ensemble: r1i1p1}
    scripts:
      nam_nao_sam:
        script: ipccwg1ar6ch3_modes/nam_nao_sam.ncl
        start_year: 1958
        end_year: 2014
        reference_dataset: JRA-55

  # **********************************************************************
  # IPCC WGI AR6, chap. 3
  # Sect. 3.3
  # Fig 3.34
  # **********************************************************************
  # NAM_SAM DAMIP
  # **********************************************************************

  diag_calc_obs:
    description: IPCC AR6 Ch. 3, Fig. 3.** (sea level pressure)
    themes:
      - phys
    realms:
      - atmos
    variables:
      psl_obs:
        short_name: psl
        preprocessor: psl_am
        reference_dataset: ERA5
        mip: Amon
        start_year: 1957
        end_year: 2019
        additional_datasets:
          - {dataset: ERA5, project: OBS, type: reanaly, version: 1, tier: 3}
          - {dataset: JRA-55, project: OBS, type: reanaly, version: 1, tier: 3, start_year:  1958}
    scripts:
      diag_obs_djf: &diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.obs.alt_def.ncwrite.ncl
        season: 'djf'
        syear_nam: 1958
        eyear_nam: 2019
        syear_sam0: 1979
        eyear_sam0: 2019
        syear_sam1: 2000
        eyear_sam1: 2019
      diag_obs_jja:
        <<: *diag_calc_hist
        season: 'jja'
        
  diag_calc_historical:
    description: IPCC AR6 Ch. 3, Fig. 3.** (sea level pressure)
    themes:
      - phys
    realms:
      - atmos
    variables:
      psl_hist: &var_def_2
        short_name: psl
        preprocessor: psl_am
        reference_dataset: ERA5
        mip: Amon
        project: CMIP6
        grid: gn
        exp: [historical, ssp245]
        start_year: 1957
        end_year: 2019
        additional_datasets:
          - {dataset: ACCESS-CM2, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: ACCESS-ESM1-5, ensemble: r(1:12)i1p1f1, grid: gn}
          - {dataset: ACCESS-ESM1-5, ensemble: r14i1p1f1, grid: gn}
          - {dataset: AWI-CM-1-1-MR, ensemble: r1i1p1f1, grid: gn}
          - {dataset: BCC-CSM2-MR, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CAMS-CSM1-0, ensemble: r(1:2)i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r(1:10)i1p1f1, grid: gn}
          - {dataset: CanESM5, ensemble: r(1:10)i1p2f1, grid: gn}
          - {dataset: CanESM5-CanOE, ensemble: r(1:3)i1p2f1, grid: gn}
          #- {dataset: CESM2, ensemble: r1i1p1f1, grid: gn} #concatenation failure
          #- {dataset: CESM2, ensemble: r4i1p1f1, grid: gn} #concatenation failure
          - {dataset: CESM2, ensemble: r(10:11)i1p1f1, grid: gn}
          #- {dataset: CESM2-WACCM, ensemble: r(1:3)i1p1f1, grid: gn} #concatenation failure
          - {dataset: CIESM, ensemble: r1i1p1f1, grid: gr}
          - {dataset: CMCC-CM2-SR5, ensemble: r1i1p1f1, grid: gn}
          - {dataset: CNRM-CM6-1, ensemble: r(1:10)i1p1f2, grid: gr}
          - {dataset: CNRM-CM6-1-HR, ensemble: r1i1p1f2, grid: gr}
          - {dataset: CNRM-ESM2-1, ensemble: r1i1p1f2, grid: gr}
          - {dataset: CNRM-ESM2-1, ensemble: r(3:5)i1p1f2, grid: gr}
          - {dataset: CNRM-ESM2-1, ensemble: r(7:10)i1p1f2, grid: gr}
          #- {dataset: EC-Earth3, ensemble: r1i1p1f1, grid: gr}
          - {dataset: EC-Earth3-Veg, ensemble: r1i1p1f1, grid: gr}
          - {dataset: EC-Earth3-Veg, ensemble: r(3:6)i1p1f1, grid: gr}
          - {dataset: EC-Earth3-Veg, ensemble: r12i1p1f1, grid: gr}
          - {dataset: EC-Earth3-Veg, ensemble: r14i1p1f1, grid: gr}
          - {dataset: FGOALS-f3-L, ensemble: r1i1p1f1, grid: gr}
          - {dataset: FGOALS-g3, ensemble: r1i1p1f1, grid: gn}
          - {dataset: FIO-ESM-2-0, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: GFDL-CM4, ensemble: r1i1p1f1, grid: gr1}
          - {dataset: GFDL-ESM4, ensemble: r(1:3)i1p1f1, grid: gr1}
          - {dataset: GISS-E2-1-G, ensemble: r(1:6)i1p1f2, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r8i1p1f2, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r10i1p1f2, grid: gn}
          - {dataset: GISS-E2-1-G, ensemble: r(1:5)i1p3f1, grid: gn}
          - {dataset: HadGEM3-GC31-LL, ensemble: r(1:4)i1p1f3, grid: gn}
          - {dataset: IITM-ESM, ensemble: r1i1p1f1, grid: gn}
          - {dataset: INM-CM4-8, ensemble: r1i1p1f1, grid: gr1}
          - {dataset: INM-CM5-0, ensemble: r1i1p1f1, grid: gr1}
          - {dataset: IPSL-CM6A-LR, ensemble: r(1:6)i1p1f1, grid: gr}
          - {dataset: IPSL-CM6A-LR, ensemble: r(10:11)i1p1f1, grid: gr}
          - {dataset: IPSL-CM6A-LR, ensemble: r14i1p1f1, grid: gr}
          - {dataset: IPSL-CM6A-LR, ensemble: r22i1p1f1, grid: gr}
          - {dataset: IPSL-CM6A-LR, ensemble: r25i1p1f1, grid: gr}
          - {dataset: KACE-1-0-G, ensemble: r(1:3)i1p1f1, grid: gr}
          - {dataset: KIOST-ESM, ensemble: r1i1p1f1, grid: gr1}
          - {dataset: MCM-UA-1-0, ensemble: r1i1p1f2, grid: gn}
          - {dataset: MIROC6, ensemble: r(1:50)i1p1f1, grid: gn}
          - {dataset: MIROC-ES2L, ensemble: r1i1p1f2, grid: gn}
          - {dataset: MIROC-ES2L, ensemble: r(3:4)i1p1f2, grid: gn}
          - {dataset: MIROC-ES2L, ensemble: r(8:9)i1p1f2, grid: gn}
          - {dataset: MPI-ESM1-2-LR, ensemble: r(1:10)i1p1f1, grid: gn}
          - {dataset: MRI-ESM2-0, ensemble: r(1:5)i1p1f1, grid: gn}
          - {dataset: NESM3, ensemble: r(1:2)i1p1f1, grid: gn}
          #- {dataset: NorESM2-LM, ensemble: r1i1p1f1, grid: gn} # fix metadata error
          - {dataset: NorESM2-LM, ensemble: r(1:3)i1p1f1, grid: gn}
          - {dataset: NorESM2-MM, ensemble: r(1:2)i1p1f1, grid: gn}
          - {dataset: UKESM1-0-LL, ensemble: r(1:4)i1p1f2, grid: gn}
          - {dataset: UKESM1-0-LL, ensemble: r8i1p1f2, grid: gn}
          - {dataset: UKESM1-0-LL, ensemble: r13i1p1f2, grid: gn}
    scripts:
      diag_hist_djf:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.hist.alt_def.ncwrite.ncl
        season: 'djf'
      diag_hist_jja:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.hist.alt_def.ncwrite.ncl
        season: 'jja'

  diag_calc_pi:
    description: IPCC AR6 Ch. 3, Fig. 3.** (sea level pressure)
    themes:
      - phys
    realms:
      - atmos
    variables:
      psl_pi:
        <<: *var_def_2
        exp: piControl
        additional_datasets:
          - {dataset: ACCESS-CM2, grid: gn, ensemble: r1i1p1f1, start_year: 950, end_year: 1012}
          - {dataset: ACCESS-ESM1-5, grid: gn, ensemble: r1i1p1f1, start_year: 101, end_year: 163}
          - {dataset: AWI-CM-1-1-MR, grid: gn, ensemble: r1i1p1f1, start_year: 2401, end_year: 2463}
          #- {dataset: AWI-ESM-1-1-LR, grid: gn, ensemble: r1i1p1f1, start_year: 1855, end_year: 1917} # fix_metadata failure
          - {dataset: BCC-CSM2-MR, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: BCC-ESM1, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: CAMS-CSM1-0, grid: gn, ensemble: r1i1p1f1, start_year: 2900, end_year: 2962}
          - {dataset: CanESM5, grid: gn, ensemble: r1i1p2f1, start_year: 5550, end_year: 5612}
          - {dataset: CanESM5-CanOE, grid: gn, ensemble: r1i1p2f1, start_year: 5550, end_year: 5612}
          - {dataset: CESM2, grid: gn, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: CESM2-FV2, grid: gn, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: CESM2-WACCM, grid: gn, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: CESM2-WACCM-FV2, grid: gn, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: CIESM, grid: gr, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: CMCC-CM2-SR5, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: CMCC-ESM2, ensemble: r1i1p1f1, grid: gn, start_year: 1850, end_year: 1912}
          - {dataset: CNRM-CM6-1, grid: gr, ensemble: r1i1p1f2, start_year: 1850, end_year: 1912}
          - {dataset: CNRM-CM6-1-HR, grid: gr, ensemble: r1i1p1f2, start_year: 1850, end_year: 1912}
          - {dataset: CNRM-ESM2-1, grid: gr, ensemble: r1i1p1f2, start_year: 1850, end_year: 1912}
          - {dataset: E3SM-1-0, grid: gr, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: E3SM-1-1, grid: gr, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          #- {dataset: E3SM-1-1-ECA, grid: gr, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: EC-Earth3, grid: gr, ensemble: r1i1p1f1, start_year: 2259, end_year: 2321}
          - {dataset: EC-Earth3-AerChem, ensemble: r1i1p1f1, grid: gr, start_year: 1850, end_year: 1912}
          - {dataset: EC-Earth3-LR, grid: gr, ensemble: r1i1p1f1, start_year: 2219, end_year: 2281}
          - {dataset: EC-Earth3-Veg, grid: gr, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: EC-Earth3-Veg-LR, grid: gr, ensemble: r1i1p1f1, start_year: 2300, end_year: 2362}
          - {dataset: FGOALS-f3-L, grid: gr, ensemble: r1i1p1f1, start_year: 600, end_year: 662}
          - {dataset: FGOALS-g3, grid: gn, ensemble: r1i1p1f1, start_year: 200, end_year: 262}
          - {dataset: FIO-ESM-2-0, grid: gn, ensemble: r1i1p1f1, start_year: 301, end_year: 363}
          - {dataset: GFDL-CM4, grid: gr1, ensemble: r1i1p1f1, start_year: 151, end_year: 213}
          - {dataset: GFDL-ESM4, grid: gr1, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: GISS-E2-1-G, grid: gn, ensemble: r1i1p1f1, start_year: 4150, end_year: 4212}
          - {dataset: GISS-E2-1-G-CC, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: GISS-E2-1-H, grid: gn, ensemble: r1i1p1f1, start_year: 3180, end_year: 3242}
          - {dataset: GISS-E2-2-G, grid: gn, ensemble: r1i1p1f1, start_year: 2000, end_year: 2062}
          - {dataset: HadGEM3-GC31-LL, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: HadGEM3-GC31-MM, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: IITM-ESM, grid: gn, ensemble: r1i1p1f1, start_year: 1926, end_year: 1988}
          - {dataset: INM-CM4-8, grid: gr1, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: INM-CM5-0, grid: gr1, ensemble: r1i1p1f1, start_year: 1996, end_year: 2058}
          - {dataset: IPSL-CM6A-LR, grid: gr, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: KACE-1-0-G, grid: gr, ensemble: r1i1p1f1, start_year: 2000, end_year: 2062}
          - {dataset: KIOST-ESM, grid: gr1, ensemble: r1i1p1f1, start_year: 2689, end_year: 2751}
          - {dataset: MCM-UA-1-0, grid: gn, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: MIROC6, grid: gn, ensemble: r1i1p1f1, start_year: 3200, end_year: 3262}
          - {dataset: MIROC-ES2L, grid: gn, ensemble: r1i1p1f2, start_year: 1850, end_year: 1912}
          - {dataset: MPI-ESM-1-2-HAM, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: MPI-ESM1-2-HR, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: MPI-ESM1-2-LR, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: MRI-ESM2-0, grid: gn, ensemble: r1i1p1f1, start_year: 1850, end_year: 1912}
          - {dataset: NESM3, grid: gn, ensemble: r1i1p1f1, start_year: 500, end_year: 562}
          - {dataset: NorCPM1, grid: gn, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: NorESM1-F, grid: gn, ensemble: r1i1p1f1, start_year: 1501, end_year: 1563}
          #- {dataset: NorESM2-LM, grid: gn, ensemble: r1i1p1f1, start_year: 1600, end_year: 1662}
          - {dataset: NorESM2-MM, grid: gn, ensemble: r1i1p1f1, start_year: 1200, end_year: 1262}
          - {dataset: SAM0-UNICON, grid: gn, ensemble: r1i1p1f1, start_year: 1, end_year: 63}
          - {dataset: TaiESM1, grid: gn, ensemble: r1i1p1f1, start_year: 201, end_year: 263}
          - {dataset: UKESM1-0-LL, grid: gn, ensemble: r1i1p1f2, start_year: 1960, end_year: 2022}
    scripts:
      diag_pi_djf: &diag_calc_pi
        script: ipccwg1ar6ch3_modes/nam_sam.piControl.alt_def.ncwrite.ncl
        season: 'djf'
        syear_nam: 1
        eyear_nam: 62
        syear_sam0: 22
        eyear_sam0: 62
        syear_sam1: 43
        eyear_sam1: 62
      diag_pi_jja:
        <<: *diag_calc_pi
        season: 'jja'
        
  diag_calc_hist-aer:
    description: IPCC AR6 Ch. 3, Fig. 3.** (sea level pressure)
    themes:
      - phys
    realms:
      - atmos
    variables:
      psl_aer:
        <<: *var_def_2
        exp: hist-aer
        additional_datasets:
          - {dataset: ACCESS-ESM1-5, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: BCC-CSM2-MR, grid: gn, ensemble: r(1:3)i1p1f1}
          #- {dataset: BCC-CSM2-MR, grid: gn, ensemble: r3i1p1f1} # fix metadata error
          - {dataset: CanESM5, grid: gn, ensemble: r(1:15)i1p1f1}
          - {dataset: CanESM5, grid: gn, ensemble: r(1:15)i1p2f1}
          #- {dataset: CESM2, grid: gn, ensemble: r1i1p1f1} # until 2014 only
          #- {dataset: CESM2, grid: gn, ensemble: r3i1p1f1} # until 2014 only
          - {dataset: CNRM-CM6-1, grid: gr, ensemble: r(1:10)i1p1f2}
          - {dataset: FGOALS-g3, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: GFDL-ESM4,  grid: gr1, ensemble: r1i1p1f1}
          - {dataset: GISS-E2-1-G,  grid: gn, ensemble: r(1:5)i1p3f1, exp: [hist-aer, ssp245-aer]}
          - {dataset: HadGEM3-GC31-LL, grid: gn, ensemble: r(1:4)i1p1f3}
          - {dataset: IPSL-CM6A-LR, grid: gr, ensemble: r(1:10)i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r6i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r(8:9)i1p1f1}
          - {dataset: MRI-ESM2-0,  grid: gn, ensemble: r(1:5)i1p1f1}
          - {dataset: NorESM2-LM,  grid: gn, ensemble: r(1:3)i1p1f1}
    scripts:
      diag_hist-aer_djf:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.damip.alt_def.ncwrite.ncl
        scenario: 'hist-aer'
        season: 'djf'
      diag_hist-aer_jja:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.damip.alt_def.ncwrite.ncl
        scenario: 'hist-aer'
        season: 'jja'

  diag_calc_hist-GHG:
    description: IPCC AR6 Ch. 3, Fig. 3.** (sea level pressure)
    themes:
      - phys
    realms:
      - atmos
    variables:
      psl_GHG:
        <<: *var_def_2
        exp: hist-GHG
        additional_datasets:
          - {dataset: ACCESS-ESM1-5, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: BCC-CSM2-MR, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: CanESM5, grid: gn, ensemble: r(1:25)i1p1f1}
          - {dataset: CanESM5, grid: gn, ensemble: r(1:25)i1p2f1}
          #- {dataset: CESM2, grid: gn, ensemble: r(1:3)i1p1f1} until 2014 only
          - {dataset: CNRM-CM6-1, grid: gr, ensemble: r1i1p1f2}
          - {dataset: CNRM-CM6-1, grid: gr, ensemble: r(3:10)i1p1f2}
          - {dataset: FGOALS-g3, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: GFDL-ESM4,  grid: gr1, ensemble: r1i1p1f1}
          - {dataset: GISS-E2-1-G,  grid: gn, ensemble: r(1:5)i1p1f1, exp: [hist-GHG, ssp245-GHG]}
          - {dataset: HadGEM3-GC31-LL, grid: gn, ensemble: r(1:4)i1p1f3}
          - {dataset: IPSL-CM6A-LR, grid: gr, ensemble: r(1:10)i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: MRI-ESM2-0,  grid: gn, ensemble: r(1:5)i1p1f1}
          - {dataset: NorESM2-LM,  grid: gn, ensemble: r(2:3)i1p1f1}
    scripts:
      diag_hist-GHG_djf:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.damip.alt_def.ncwrite.ncl
        scenario: 'hist-GHG'
        season: 'djf'
      diag_hist-GHG_jja:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.damip.alt_def.ncwrite.ncl
        scenario: 'hist-GHG'
        season: 'jja'

  diag_calc_hist-nat:
    description: IPCC AR6 Ch. 3, Fig. 3.** (sea level pressure)
    themes:
      - phys
    realms:
      - atmos
    variables:
      psl_nat:
        <<: *var_def_2
        exp: hist-nat
        additional_datasets:
          - {dataset: ACCESS-ESM1-5, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: BCC-CSM2-MR, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: CanESM5, grid: gn, ensemble: r(1:25)i1p1f1}
          - {dataset: CanESM5, grid: gn, ensemble: r(1:25)i1p2f1}
          #- {dataset: CESM2, grid: gn, ensemble: r(1:3)i1p1f1} # until 2014 only
          - {dataset: CNRM-CM6-1, grid: gr, ensemble: r(1:10)i1p1f2}
          - {dataset: FGOALS-g3, grid: gn, ensemble: r1i1p1f1}
          - {dataset: GFDL-ESM4,  grid: gr1, ensemble: r(1:3)i1p1f1}
          - {dataset: GISS-E2-1-G,  grid: gn, ensemble: r(1:5)i1p1f2, exp: [hist-nat, ssp245-nat]}
          - {dataset: HadGEM3-GC31-LL, grid: gn, ensemble: r(1:4)i1p1f3}
          - {dataset: IPSL-CM6A-LR, grid: gr, ensemble: r(1:10)i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r5i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r7i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r10i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r13i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r25i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r28i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r32i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r34i1p1f1}
          - {dataset: MRI-ESM2-0,  grid: gn, ensemble: r(1:5)i1p1f1}
          - {dataset: NorESM2-LM,  grid: gn, ensemble: r(1:3)i1p1f1}
    scripts:
      diag_hist-nat_djf:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.damip.alt_def.ncwrite.ncl
        scenario: 'hist-nat'
        season: 'djf'
      diag_hist-nat_jja:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.damip.alt_def.ncwrite.ncl
        scenario: 'hist-nat'
        season: 'jja'

  diag_calc_hist-stratO3:
    description: IPCC AR6 Ch. 3, Fig. 3.** (sea level pressure)
    themes:
      - phys
    realms:
      - atmos
    variables:
      psl_stratO3:
        <<: *var_def_2
        exp: hist-stratO3
        additional_datasets:
          - {dataset: CanESM5, grid: gn, ensemble: r(1:10)i1p1f1}
          #- {dataset: GISS-E2-1-G, grid: gn, ensemble: r(1:5)i1p1f3} # until 2014 only
          - {dataset: IPSL-CM6A-LR, grid: gr, ensemble: r(1:10)i1p1f1}
          - {dataset: MIROC6, grid: gn, ensemble: r(1:3)i1p1f1}
          - {dataset: MRI-ESM2-0, grid: gn, ensemble: r1i1p1f1}
          - {dataset: MRI-ESM2-0, grid: gn, ensemble: r3i1p1f1}
          - {dataset: MRI-ESM2-0, grid: gn, ensemble: r5i1p1f1}
    scripts:
      diag_hist-stratO3_djf:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.damip.alt_def.ncwrite.ncl
        scenario: 'hist-stratO3'
        season: 'djf'
      diag_hist-stratO3_jja:
        <<: *diag_calc_hist
        script: ipccwg1ar6ch3_modes/nam_sam.damip.alt_def.ncwrite.ncl
        scenario: 'hist-stratO3'
        season: 'jja'

  nam_sam_da:
    description: plotting diagnostic
    scripts:
      nam_sam_trends_damip:
        script: ipccwg1ar6ch3_modes/nam_sam.trends.summary.bar.ncl
        ancestors: ['diag_calc_obs/diag_obs*', 'diag_calc_historical/diag_hist_*', 'diag_calc_pi/diag_pi_*', 'diag_calc_hist-aer/diag_hist-aer_*', 'diag_calc_hist-GHG/diag_hist-GHG_*', 'diag_calc_hist-nat/diag_hist-nat_*', 'diag_calc_hist-stratO3/diag_hist-stratO3_*']


  # **********************************************************************
  # IPCC WGI AR6, chap. 3
  # Sect. 3.3
  # Fig 3.39
  # **********************************************************************
  # PDV spatio-temporal properties in observations and models
  # **********************************************************************
  # Fig 3.40
  # **********************************************************************
  # AMV spatio-temporal properties in observations and models
  pdv-amv:
    description: IPCC AR6 Ch. 3, Figs. 3.39 and 3.40 (surface temperature)
    themes:
      - phys
    realms:
      - atmos
    variables:
      ts_cmip6: &var_def_3
        short_name: tos
        preprocessor: temp_tr
        reference_dataset: ERSSTv5
        mip: Omon
        project: CMIP6
        exp: historical
        ensemble: r1i1p1f1
        grid: gn
        start_year: 1900
        end_year: 2014
        additional_datasets:
          - {dataset: ACCESS-CM2, ensemble: r(1:3)i1p1f1}
          - {dataset: ACCESS-CM2, exp: piControl, start_year: 950, end_year: 1064}
          - {dataset: ACCESS-ESM1-5, ensemble: r(1:6)i1p1f1}
          - {dataset: ACCESS-ESM1-5, ensemble: r(8:11)i1p1f1}
          - {dataset: ACCESS-ESM1-5, ensemble: r(13:20)i1p1f1}
          - {dataset: ACCESS-ESM1-5, exp: piControl, start_year: 101, end_year: 215}
          #- {dataset: AWI-CM-1-1-MR, ensemble: r(1:5)i1p1f1} # preprocessor failure; all member?
          #- {dataset: AWI-CM-1-1-MR, exp: piControl, start_year: 2401, end_year: 2515}
          #- {dataset: AWI-ESM-1-1-LR, ensemble: r1i1p1f1} # preprocessor failure
          #- {dataset: AWI-ESM-1-1-LR, exp: piControl, start_year: 1855, end_year: 1969} # too short
          - {dataset: BCC-CSM2-MR, ensemble: r(1:3)i1p1f1}
          - {dataset: BCC-CSM2-MR, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: BCC-ESM1, ensemble: r1i1p1f1}
          #- {dataset: BCC-ESM1, ensemble: r2i1p1f1} # preprocessor failure
          - {dataset: BCC-ESM1, ensemble: r3i1p1f1}
          - {dataset: BCC-ESM1, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: CAMS-CSM1-0, ensemble: r(1:2)i1p1f1}
          - {dataset: CAMS-CSM1-0, ensemble: r1i1p1f2}
          - {dataset: CAMS-CSM1-0, exp: piControl, start_year: 2900, end_year: 3014}
          - {dataset: CanESM5, ensemble: r(1:25)i1p1f1}
          - {dataset: CanESM5, ensemble: r(1:40)i1p2f1}
          - {dataset: CanESM5, ensemble: r1i1p2f1, exp: piControl, start_year: 5550, end_year: 5664} 
          - {dataset: CanESM5-CanOE, ensemble: r(1:3)i1p2f1}
          - {dataset: CanESM5-CanOE, ensemble: r1i1p2f1, exp: piControl, start_year: 5550, end_year: 5664} 
          #- {dataset: CAS-ESM2-0, ensemble: r(1:4)i1p1f1}
          #- {dataset: CAS-ESM2-0, exp: piControl, start_year: 1855, end_year: 1969} # too short
          - {dataset: CESM2, ensemble: r(1:11)i1p1f1}
          - {dataset: CESM2, exp: piControl, start_year: 1, end_year: 115}
          - {dataset: CESM2-FV2, ensemble: r(1:3)i1p1f1}
          - {dataset: CESM2-FV2, exp: piControl, start_year: 1, end_year: 115}
          - {dataset: CESM2-WACCM, ensemble: r(1:3)i1p1f1}
          - {dataset: CESM2-WACCM, exp: piControl, start_year: 1, end_year: 115} 
          - {dataset: CESM2-WACCM-FV2, ensemble: r(1:3)i1p1f1}
          - {dataset: CESM2-WACCM-FV2, exp: piControl, start_year: 1, end_year: 115} 
          - {dataset: CIESM, ensemble: r(1:3)i1p1f1}
          - {dataset: CIESM, exp: piControl, start_year: 1, end_year: 115}
          #- {dataset: CMCC-CM2-HR4, ensemble: r1i1p1f1}
          #- {dataset: CMCC-CM2-HR4, exp: piControl}
          - {dataset: CMCC-CM2-SR5}
          - {dataset: CMCC-CM2-SR5, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: CMCC-ESM2, ensemble: r1i1p1f1}
          - {dataset: CMCC-ESM2, grid: gn, start_year: 1850, end_year: 1964}
          - {dataset: CNRM-CM6-1, ensemble: r(1:30)i1p1f2}
          - {dataset: CNRM-CM6-1, ensemble: r1i1p1f2, exp: piControl, start_year: 1850, end_year: 1964} 
          - {dataset: CNRM-CM6-1-HR, ensemble: r1i1p1f2}
          - {dataset: CNRM-CM6-1-HR, ensemble: r1i1p1f2, exp: piControl, start_year: 1850, end_year: 1964} 
          - {dataset: CNRM-ESM2-1, ensemble: r(1:11)i1p1f2}
          - {dataset: CNRM-ESM2-1, ensemble: r1i1p1f2, exp: piControl, start_year: 1850, end_year: 1964} 
          - {dataset: E3SM-1-0, grid: gr, ensemble: r(1:5)i1p1f1}
          - {dataset: E3SM-1-0, grid: gr, exp: piControl, start_year: 1, end_year: 115} 
          - {dataset: E3SM-1-1, grid: gr}
          - {dataset: E3SM-1-1, grid: gr, exp: piControl, start_year: 1850, end_year: 1964} 
          - {dataset: E3SM-1-1-ECA, grid: gr}
          - {dataset: E3SM-1-1-ECA, grid: gr, exp: piControl, start_year: 1850, end_year: 1964} 
          - {dataset: EC-Earth3, ensemble: r(1:4)i1p1f1}
          - {dataset: EC-Earth3, ensemble: r6i1p1f1}
          - {dataset: EC-Earth3, ensemble: r9i1p1f1}
          - {dataset: EC-Earth3, ensemble: r(11:22)i1p1f1}
          - {dataset: EC-Earth3, ensemble: r24i1p1f1}
          - {dataset: EC-Earth3, exp: piControl, start_year: 2259, end_year: 2373}
          #- {dataset: EC-Earth3-LR} 
          #- {dataset: EC-Earth3-LR, exp: piControl, start_year: 2219, end_year: 2333} 
          - {dataset: EC-Earth3-Veg, ensemble: r(1:6)i1p1f1}
          - {dataset: EC-Earth3-Veg, ensemble: r14i1p1f1}
          - {dataset: EC-Earth3-Veg, exp: piControl, start_year: 1850, end_year: 1964} 
          #- {dataset: EC-Earth3-Veg-LR, ensemble: r(1:3)i1p1f1}
          - {dataset: EC-Earth3-Veg-LR, ensemble: r1i1p1f1}
          - {dataset: EC-Earth3-Veg-LR, ensemble: r3i1p1f1}
          - {dataset: EC-Earth3-Veg-LR, exp: piControl, start_year: 2300, end_year: 2414} 
          #- {dataset: FGOALS-f3-L, ensemble: r(1:3)i1p1f1} # preprocessor failure; which member?
          #- {dataset: FGOALS-f3-L, exp: piControl, start_year: 600, end_year: 714} 
          - {dataset: FGOALS-g3, ensemble: r(1:6)i1p1f1}
          - {dataset: FGOALS-g3, exp: piControl, start_year: 200, end_year: 314} 
          - {dataset: FIO-ESM-2-0, ensemble: r(1:3)i1p1f1}
          - {dataset: FIO-ESM-2-0, exp: piControl, start_year: 301, end_year: 415} 
          - {dataset: GFDL-CM4}
          - {dataset: GFDL-CM4, exp: piControl, start_year: 151, end_year: 265} 
          - {dataset: GFDL-ESM4, ensemble: r(1:3)i1p1f1}
          - {dataset: GFDL-ESM4, exp: piControl, start_year: 1, end_year: 115} 
          - {dataset: GISS-E2-1-G, ensemble: r(1:10)i1p1f2}
          - {dataset: GISS-E2-1-G, ensemble: r1i1p1f2, exp: piControl, start_year: 7550, end_year: 7664}
          #- {dataset: GISS-E2-1-G-CC}
          #- {dataset: GISS-E2-1-G-CC, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: GISS-E2-1-H, ensemble: r(1:10)i1p1f1}
          - {dataset: GISS-E2-1-H, exp: piControl, start_year: 3180, end_year: 3294}
          #- {dataset: GISS-E2-2-G}
          #- {dataset: GISS-E2-2-G, exp: piControl, start_year: 2000, end_year: 2114}
          - {dataset: HadGEM3-GC31-LL, ensemble: r(1:4)i1p1f3}
          - {dataset: HadGEM3-GC31-LL, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: HadGEM3-GC31-MM, ensemble: r(1:4)i1p1f3}
          - {dataset: HadGEM3-GC31-MM, exp: piControl, start_year: 1850, end_year: 1964}
          #- {dataset: IITM-ESM} # preprocessor failure
          #- {dataset: IITM-ESM, exp: piControl, start_year: 1926, end_year: 2040}
          - {dataset: INM-CM4-8, grid: gr1}
          - {dataset: INM-CM4-8, grid: gr1, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: INM-CM5-0, grid: gr1, ensemble: r(1:10)i1p1f1}
          - {dataset: INM-CM5-0, grid: gr1, exp: piControl, start_year: 1996, end_year: 2110}
          - {dataset: IPSL-CM6A-LR, ensemble: r(1:32)i1p1f1}
          - {dataset: IPSL-CM6A-LR, exp: piControl, start_year: 3050, end_year: 3164}
          #- {dataset: KACE-1-0-G, grid: gr, ensemble: r(1:3)i1p1f1} # preprocessor failure
          #- {dataset: KACE-1-0-G, grid: gr, exp: piControl}
          #- {dataset: KIOST-ESM, grid: gr1} # somehow the script fails
          #- {dataset: KIOST-ESM, grid: gr1, exp: piControl}
          #- {dataset: MCM-UA-1-0, ensemble: r1i1p1f2} # preprocessor failure
          #- {dataset: MCM-UA-1-0, exp: piControl, start_year: 1, end_year: 115} # preprocessor failure
          - {dataset: MIROC6, ensemble: r(1:50)i1p1f1}
          - {dataset: MIROC6, exp: piControl, start_year: 3201, end_year: 3315}
          - {dataset: MIROC-ES2L, ensemble: r(1:10)i1p1f2}
          - {dataset: MIROC-ES2L, ensemble: r1i1p1f2, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: MPI-ESM-1-2-HAM, ensemble: r(1:3)i1p1f1}
          - {dataset: MPI-ESM-1-2-HAM, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: MPI-ESM1-2-HR, ensemble: r(1:10)i1p1f1}
          - {dataset: MPI-ESM1-2-HR, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: MPI-ESM1-2-LR, ensemble: r(1:10)i1p1f1}
          - {dataset: MPI-ESM1-2-LR, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: MRI-ESM2-0, ensemble: r(1:5)i1p1f1}
          - {dataset: MRI-ESM2-0, exp: piControl, start_year: 1850, end_year: 1964}
          - {dataset: NESM3, ensemble: r(1:5)i1p1f1}
          - {dataset: NESM3, exp: piControl, start_year: 1050, end_year: 1164}
          - {dataset: NorCPM1, ensemble: r(1:30)i1p1f1}
          - {dataset: NorCPM1, exp: piControl, start_year: 150, end_year: 264}
          - {dataset: NorESM2-LM, ensemble: r(1:3)i1p1f1}
          - {dataset: NorESM2-LM, exp: piControl, start_year: 1650, end_year: 1764}
          - {dataset: NorESM2-MM, ensemble: r(1:3)i1p1f1}
          - {dataset: NorESM2-MM, exp: piControl, start_year: 1200, end_year: 1314}
          - {dataset: SAM0-UNICON}
          - {dataset: SAM0-UNICON, exp: piControl, start_year: 150, end_year: 264}
          #- {dataset: TaiESM1}
          #- {dataset: TaiESM1, exp: piControl}
          - {dataset: UKESM1-0-LL, ensemble: r(1:4)i1p1f2}
          - {dataset: UKESM1-0-LL, ensemble: r(8:13)i1p1f2}
          - {dataset: UKESM1-0-LL, ensemble: r(16:19)i1p1f2}
          - {dataset: UKESM1-0-LL, ensemble: r1i1p1f2, exp: piControl, start_year: 2050, end_year: 2164}
          # OBSERVATIONS:
          - {dataset: ERSSTv5, project: OBS, type: reanaly, version: 1, tier: 2}
          - {dataset: HadISST, project: OBS, type: reanaly, version: 1, tier: 2}
          - {dataset: COBE-SST2, project: OBS, type: reanaly, version: 1, tier: 2}
      ts_cmip5:
        <<: *var_def_3
        project: CMIP5
        ensemble: r1i1p1
        exp: historical
        end_year: 2005
        additional_datasets:
          - {dataset: ACCESS1-0}
          - {dataset: ACCESS1-0,     exp: piControl,   start_year:  300, end_year:  414}
          - {dataset: ACCESS1-3, ensemble: r(1:2)i1p1}
          - {dataset: ACCESS1-3,     version: 2, exp: piControl,   start_year:  300, end_year:  414}
          - {dataset: bcc-csm1-1}
          - {dataset: bcc-csm1-1,    exp: piControl,   start_year:  160, end_year:  274}
          - {dataset: bcc-csm1-1-m}
          - {dataset: bcc-csm1-1-m,  exp: piControl,   start_year:  240, end_year:  354}
          #- {dataset: BNU-ESM}  # Regrid error
          #- {dataset: BNU-ESM, exp: piControl, start_year: 1450, end_year: 1564} # Regrid error
          #- {dataset: CanCM4, ensemble: r(1:10)i1p1} # since 1961 only
          - {dataset: CanESM2, ensemble: r(1:5)i1p1}
          - {dataset: CanESM2,       exp: piControl, start_year: 2321, end_year: 2435}
          - {dataset: CCSM4, ensemble: r(1:6)i1p1}
          - {dataset: CCSM4,         exp: piControl, ensemble: r1i1p1, start_year: 850, end_year: 964}
          - {dataset: CESM1-BGC}
          - {dataset: CESM1-BGC,         exp: piControl, ensemble: r1i1p1, start_year: 101, end_year: 215}
          - {dataset: CESM1-CAM5, ensemble: r(1:3)i1p1}
          - {dataset: CESM1-CAM5,        exp: piControl, ensemble: r1i1p1, start_year: 1, end_year: 115}
          - {dataset: CESM1-CAM5-1-FV2, ensemble: r(1:4)i1p1}
          - {dataset: CESM1-FASTCHEM, ensemble: r(1:3)i1p1}
          - {dataset: CESM1-FASTCHEM, exp: piControl, ensemble: r1i1p1, start_year: 70, end_year: 184}
          - {dataset: CESM1-WACCM, ensemble: r1i1p1}
          #- {dataset: CESM1-WACCM, ensemble: r(2:7)i1p1} # since 1955 only
          - {dataset: CESM1-WACCM,    exp: piControl, ensemble: r1i1p1, start_year: 96, end_year: 210}
          - {dataset: CMCC-CESM}
          - {dataset: CMCC-CM}
          - {dataset: CMCC-CM,    exp: piControl, ensemble: r1i1p1, start_year: 1550, end_year: 1664}
          - {dataset: CMCC-CMS}
          - {dataset: CNRM-CM5, ensemble: r(1:10)i1p1}
          - {dataset: CNRM-CM5,      exp: piControl,   start_year: 1850, end_year: 1964}
          - {dataset: CNRM-CM5-2}
          - {dataset: CSIRO-Mk3-6-0, ensemble: r(1:10)i1p1}
          - {dataset: CSIRO-Mk3-6-0, exp: piControl,   start_year:  104, end_year:  218}
          #- {dataset: CSIRO-Mk3L-1-2, ensemble: r1i2p1}
          - {dataset: EC-EARTH, ensemble: r1i1p1}
          #- {dataset: EC-EARTH, ensemble: r(2:3)i1p1} # Repeats the same seasonal cycle
          #- {dataset: EC-EARTH, ensemble: r(5:7)i1p1} # Repeats the same seasonal cycle
          - {dataset: EC-EARTH, ensemble: r8i1p1}
          #- {dataset: EC-EARTH, ensemble: r(9:10)i1p1} # Repeats the same seasonal cycle
          #- {dataset: EC-EARTH, ensemble: r11i1p1} # No seasonal cycle
          #- {dataset: EC-EARTH, ensemble: r(12:14)i1p1} # Repeats the same seasonal cycle
          #- {dataset: EC-EARTH, exp: piControl,   start_year: 2100, end_year: 2214} # Repeats the same seasonal cycle
          - {dataset: FGOALS-g2}
          #- {dataset: FGOALS-s2, ensemble: r(1:2)i1p1} # until 2004
          - {dataset: FIO-ESM}
          - {dataset: FIO-ESM,       exp: piControl, start_year: 450, end_year: 564}
          - {dataset: GFDL-CM2p1, ensemble: r(1:10)i1p1}
          - {dataset: GFDL-CM3, ensemble: r(1:5)i1p1}
          - {dataset: GFDL-CM3,      exp: piControl,   start_year:    1, end_year:  115}
          - {dataset: GFDL-ESM2G}
          - {dataset: GFDL-ESM2G,    exp: piControl,   start_year:    1, end_year:  115}
          - {dataset: GFDL-ESM2M}
          - {dataset: GFDL-ESM2M,    exp: piControl,   start_year:    1, end_year:  115}
          - {dataset: GISS-E2-H-CC}
          - {dataset: GISS-E2-H, ensemble: r(1:6)i1p1}
          - {dataset: GISS-E2-H, ensemble: r(1:5)i1p2}
          - {dataset: GISS-E2-H, ensemble: r(1:5)i1p3}
          - {dataset: GISS-E2-H,                   exp: piControl, start_year: 2460, end_year: 2574}
          - {dataset: GISS-E2-H, ensemble: r1i1p2, exp: piControl, start_year: 2490, end_year: 2604}
          - {dataset: GISS-E2-H, ensemble: r1i1p3, exp: piControl, start_year: 2490, end_year: 2604}
          - {dataset: GISS-E2-R-CC}
          - {dataset: GISS-E2-R, ensemble: r(1:6)i1p1}
          - {dataset: GISS-E2-R, ensemble: r(1:5)i1p(2:3)}
          - {dataset: GISS-E2-R,       exp: piControl, start_year: 3331, end_year: 3445}
          - {dataset: HadCM3, ensemble: r(1:10)i1p1}
          - {dataset: HadGEM2-AO}
          - {dataset: HadGEM2-CC, ensemble: r1i1p1, exp: [historical, rcp45]}
          - {dataset: HadGEM2-CC, exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: HadGEM2-ES, ensemble: r1i1p1, exp: historical}
          - {dataset: HadGEM2-ES, ensemble: r(2:4)i1p1, exp: [historical, rcp45]}
          - {dataset: HadGEM2-ES, exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: inmcm4}
          - {dataset: inmcm4,     exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: IPSL-CM5A-LR, ensemble: r(1:5)i1p1}
          - {dataset: IPSL-CM5A-LR,       exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: IPSL-CM5A-MR, ensemble: r1i1p1}
          - {dataset: IPSL-CM5A-MR,       exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: IPSL-CM5B-LR}
          - {dataset: IPSL-CM5B-LR,       exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: MIROC-ESM, ensemble: r(1:3)i1p1}
          - {dataset: MIROC-ESM,          exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: MIROC-ESM-CHEM, ensemble: r1i1p1}
          - {dataset: MIROC-ESM-CHEM,     exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: MIROC5, ensemble: r(1:5)i1p1}
          - {dataset: MIROC5,       exp: piControl, start_year: 2050, end_year: 2164}
          - {dataset: MPI-ESM-LR, ensemble: r(1:3)i1p1}
          - {dataset: MPI-ESM-LR,       exp: piControl, start_year: 1900, end_year: 2014}
          - {dataset: MPI-ESM-MR, ensemble: r(1:3)i1p1}
          - {dataset: MPI-ESM-P, ensemble: r(1:2)i1p1}
          - {dataset: MPI-ESM-P,       exp: piControl, start_year: 1900, end_year: 2014}
          #- {dataset: MRI-CGCM3, ensemble: r(1:3)i1p1} # preprocessor error (tos = 0 everywhere)
          #- {dataset: MRI-CGCM3, ensemble: r(4:5)i1p2} # preprocessor error (tos = 0 everywhere)
          #- {dataset: MRI-CGCM3, exp: piControl, start_year: 1900, end_year: 2014} # preprocessor error (tos = 0 everywhere)
          #- {dataset: MRI-ESM1} # preprocessor error (tos = 0 everywhere)
          - {dataset: NorESM1-M, ensemble: r(1:3)i1p1}
          - {dataset: NorESM1-M,       exp: piControl, start_year: 901, end_year: 1015}
          - {dataset: NorESM1-ME}
          - {dataset: NorESM1-ME,      exp: piControl, start_year: 901, end_year: 1015}
    scripts:
      pdv:
        script: ipccwg1ar6ch3_modes/pdv.ncl
        start_year: 1900
        end_year: 2014
        reference_dataset: ERSSTv5
      amv:
        script: ipccwg1ar6ch3_modes/amv.ncl
        start_year: 1900
        end_year: 2014
        reference_dataset: ERSSTv5
